(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{vL8p:function(t,o,i){"use strict";i.r(o),i.d(o,"HistoricoCorridasPageModule",(function(){return y}));var n=i("tyNb"),a=i("mrSG"),e=i("wd/R"),r=i("fXoL"),c=i("Dp36"),s=i("TEn/"),l=i("fkzy"),b=i("9qa2"),d=i("3Pt+"),u=i("ofXK");function g(t,o){1&t&&(r.Lb(0,"span"),r.lc(1,"Nenhuma entrega realizada no per\xedodo"),r.Kb())}function h(t,o){if(1&t&&(r.Lb(0,"div",14),r.Lb(1,"h3",12),r.lc(2),r.Kb(),r.Lb(3,"h3",12),r.lc(4),r.Kb(),r.Lb(5,"h3",12),r.lc(6),r.Kb(),r.Kb()),2&t){const t=o.$implicit;r.yb(2),r.nc("Entrega em: ",t.enderecoDestino," "),r.yb(2),r.nc("Anota\xe7\xf5es: ",t.descricao," "),r.yb(2),r.nc("O que ser\xe1 entregue: ",t.conteudoEntrega?t.conteudoEntrega:"N\xe3o informado"," ")}}function m(t,o){if(1&t&&(r.Lb(0,"ion-item"),r.Lb(1,"ion-label"),r.Lb(2,"h2"),r.lc(3),r.Kb(),r.Lb(4,"h3"),r.lc(5),r.Wb(6,"date"),r.Wb(7,"currency"),r.Kb(),r.Lb(8,"h3",12),r.lc(9),r.Kb(),r.kc(10,h,7,3,"div",13),r.Kb(),r.Kb()),2&t){const t=o.$implicit;r.yb(3),r.nc("ID: ",t.id,""),r.yb(2),r.oc("",r.Yb(6,5,t.dataFinalizada,"dd/MM/yyyy - HH:mm","GMT--3")," - ",r.Zb(7,9,t.valorEntregador+t.valorApp,"BRL",!0,"1.2"),""),r.yb(4),r.nc("Retirada em: ",t.enderecoOrigem," "),r.yb(1),r.cc("ngForOf",t.entregas)}}const p=[{path:"",component:(()=>{class t{constructor(t,o,i,n){this.api=t,this.modalController=o,this.navController=i,this.utils=n,this.corridas=[],this.usuarioLogado={}}ionViewWillEnter(){return Object(a.b)(this,void 0,void 0,(function*(){this.usuarioLogado=this.api.retornaUsuarioLogado(),this.dataInicial=e().subtract(1,"month").toDate().toISOString(),this.dataFinal=e().toDate().toISOString(),this.pesquisar()}))}retornaParametros(){let t="?dataInicial="+e(this.dataInicial).format("YYYY-MM-DD");return t+="&dataFinal="+e(this.dataFinal).format("YYYY-MM-DD"),t}pesquisar(){return Object(a.b)(this,void 0,void 0,(function*(){try{let t=this.retornaParametros(),o=yield this.api.get("seguro-cliente/corrida/historico"+t);if(o.error)return void this.utils.mensagemAviso(o.error);this.corridas=o.data}catch(t){this.utils.log(t),this.utils.mensagemAviso("Ocorreu um erro ao pesquisar")}}))}baixarPDF(){try{let t=this.retornaParametros();this.api.abreRelatorio("seguro-cliente/corrida/historico/pdf"+t)}catch(t){this.utils.log(t),this.utils.mensagemAviso("Ocorreu um erro ao gerar o relat\xf3rio")}}voltar(){this.navController.navigateRoot(["/meus-dados"])}}return t.\u0275fac=function(o){return new(o||t)(r.Ib(c.a),r.Ib(s.z),r.Ib(s.A),r.Ib(l.a))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-historico-corridas"]],decls:25,vars:5,consts:[["appScrollbarTheme","",1,"historico-corrida",3,"fullscreen"],[1,"botao-sair-x",3,"click"],["name","close-outline"],[1,"logo-miniatura-top"],["src","/assets/logoMiniatura.png"],["displayFormat","DD/MM/YYYY","doneText","Pronto","cancelText","Cancelar",3,"ngModel","ngModelChange"],["expand","block",3,"click"],["expand","block",1,"botao-acao-secundaria","botao-acao-secundaria-card",3,"click"],["name","cloud-download-outline"],[4,"ngIf"],[1,"lista-historico"],[4,"ngFor","ngForOf"],[2,"white-space","normal"],["class","item-entrega",4,"ngFor","ngForOf"],[1,"item-entrega"]],template:function(t,o){1&t&&(r.Lb(0,"ion-content",0),r.Lb(1,"div",1),r.Tb("click",(function(){return o.voltar()})),r.Jb(2,"ion-icon",2),r.Kb(),r.Lb(3,"div",3),r.Jb(4,"img",4),r.Kb(),r.Lb(5,"ion-card"),r.Lb(6,"ion-card-content"),r.Lb(7,"h5"),r.lc(8,"Hist\xf3rico de entregas"),r.Kb(),r.Lb(9,"ion-item"),r.Lb(10,"ion-label"),r.lc(11,"In\xedcio"),r.Kb(),r.Lb(12,"ion-datetime",5),r.Tb("ngModelChange",(function(t){return o.dataInicial=t})),r.Kb(),r.Kb(),r.Lb(13,"ion-item"),r.Lb(14,"ion-label"),r.lc(15,"Fim"),r.Kb(),r.Lb(16,"ion-datetime",5),r.Tb("ngModelChange",(function(t){return o.dataFinal=t})),r.Kb(),r.Kb(),r.Lb(17,"ion-button",6),r.Tb("click",(function(){return o.pesquisar()})),r.lc(18,"Pesquisar"),r.Kb(),r.Lb(19,"ion-button",7),r.Tb("click",(function(){return o.baixarPDF()})),r.lc(20," Baixar PDF "),r.Jb(21,"ion-icon",8),r.Kb(),r.kc(22,g,2,0,"span",9),r.Lb(23,"ion-list",10),r.kc(24,m,11,14,"ion-item",11),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.cc("fullscreen",!0),r.yb(12),r.cc("ngModel",o.dataInicial),r.yb(4),r.cc("ngModel",o.dataFinal),r.yb(6),r.cc("ngIf",!o.corridas||0==o.corridas.length),r.yb(2),r.cc("ngForOf",o.corridas))},directives:[s.h,b.a,s.j,s.f,s.g,s.l,s.m,s.i,s.C,d.g,d.h,s.e,u.l,s.n,u.k],pipes:[u.e,u.c],styles:["ion-content[_ngcontent-%COMP%]{--background:#513dd9}h5[_ngcontent-%COMP%]{text-align:center}.item-entrega[_ngcontent-%COMP%]{margin-bottom:5px}"]}),t})()}];let f=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(o){return new(o||t)},imports:[[n.i.forChild(p)],n.i]}),t})();var L=i("onrN");let y=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(o){return new(o||t)},imports:[[L.a,f]]}),t})()}}]);