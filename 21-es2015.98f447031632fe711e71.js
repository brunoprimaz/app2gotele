(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{Vljw:function(n,o,t){"use strict";t.r(o),t.d(o,"SolicitacaoPageModule",(function(){return Tn}));var e=t("TEn/"),a=t("tyNb"),i=t("mrSG"),r=t("fXoL"),c=t("Dp36"),s=t("ofXK");const d=["fileInput"];function g(n,o){if(1&n&&r.Jb(0,"img",3),2&n){const n=r.Vb();r.dc("src",n.imagemAtual,r.ic)}}let l=(()=>{class n{constructor(n,o,t){this.api=n,this.modalCtrl=o,this.router=t,this.imageChangedEvent="",this.carregando=!1}ionViewWillEnter(){}voltar(){this.modalCtrl.dismiss()}}return n.\u0275fac=function(o){return new(o||n)(r.Ib(c.a),r.Ib(e.z),r.Ib(a.g))},n.\u0275cmp=r.Cb({type:n,selectors:[["page-alterarFoto"]],viewQuery:function(n,o){var t;1&n&&r.pc(d,!0),2&n&&r.gc(t=r.Ub())&&(o.fileInput=t.first)},inputs:{imagemAtual:"imagemAtual"},decls:6,vars:3,consts:[[3,"fullscreen"],["alt","",3,"src",4,"ngIf"],["expand","full",1,"botao-pular",3,"disabled","click"],["alt","",3,"src"]],template:function(n,o){1&n&&(r.Lb(0,"ion-content",0),r.Lb(1,"ion-card"),r.Lb(2,"ion-card-content"),r.kc(3,g,1,1,"img",1),r.Lb(4,"ion-button",2),r.Tb("click",(function(){return o.voltar()})),r.lc(5,"Voltar"),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&n&&(r.cc("fullscreen",!0),r.yb(3),r.cc("ngIf",o.imagemAtual),r.yb(1),r.cc("disabled",o.carregando))},directives:[e.h,e.f,e.g,s.l,e.e],styles:[".botao-pular[_ngcontent-%COMP%]{margin-top:20px;color:red;background-color:unset;box-shadow:none;--background:none;--box-shadow:none}img[_ngcontent-%COMP%]{max-width:100%}"]}),n})();var b=t("fkzy"),m=t("9qa2"),p=t("3Pt+");const u=["mapElementOrigem"],f=["campoPesquisaOrigem"];function h(n,o){1&n&&r.Jb(0,"ion-icon",21)}function C(n,o){1&n&&r.Jb(0,"ion-icon",22)}function O(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-item",23),r.Lb(1,"ion-input",24),r.Tb("ngModelChange",(function(o){return r.hc(n),r.Vb().nomeFavorito=o}))("keydown.enter",(function(){return r.hc(n),r.Vb().confirmar()})),r.Kb(),r.Kb()}if(2&n){const n=r.Vb();r.yb(1),r.cc("ngModel",n.nomeFavorito)}}function M(n,o){1&n&&(r.Lb(0,"h5"),r.lc(1," Selecione o local abaixo ou pesquise novamente. "),r.Kb())}function P(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-item",26),r.Tb("click",(function(){r.hc(n);const t=o.$implicit;return r.Vb(2).selecionaLocalOrigem(t)})),r.Lb(1,"ion-avatar",27),r.Jb(2,"img",28),r.Kb(),r.Lb(3,"ion-label"),r.Lb(4,"h2"),r.lc(5),r.Kb(),r.Kb(),r.Kb()}if(2&n){const n=o.$implicit;r.yb(5),r.mc(n.enderecoFormatado)}}function _(n,o){if(1&n&&(r.Lb(0,"ion-list"),r.kc(1,P,6,1,"ion-item",25),r.Kb()),2&n){const n=r.Vb();r.yb(1),r.cc("ngForOf",n.resultadosPesquisa)}}function x(n,o){if(1&n){const n=r.Mb();r.Lb(0,"div",29),r.Lb(1,"ion-button",30),r.Tb("click",(function(){return r.hc(n),r.Vb().confirmar()})),r.lc(2," CONFIRMAR LOCAL "),r.Jb(3,"ion-icon",31),r.Kb(),r.Kb()}}const v=function(n){return{"margin-top":"100px",height:n}};let k=(()=>{class n{constructor(n,o,t){this.modalController=n,this.route=o,this.utils=t,this.enderecoOrigem="",this.numeroOrigem="",this.cidade="",this.resultadosPesquisa=[],this.selecionandoLocalDestino=!1,this.tamanhoTela=document.documentElement.offsetHeight-120,this.favoritos={origem:[],destino:[]},this.favoritarAoSair=!1,this.nomeFavorito=""}ionViewWillEnter(){this.carregaFavoritos(),this.carregaMapa(),this.favoritarAoSair=!1}carregaFavoritos(){this.favoritos=this.utils.retornaFavoritos()}carregaMapa(){let n={lat:-27.866136,lng:-54.476214};this.localSugerido&&this.localSugerido.latitude&&this.localSugerido.longitude&&(n=this.utils.retornaPosition(this.localSugerido.latitude,this.localSugerido.longitude)),setTimeout(()=>{this.map=new google.maps.Map(this.mapElementOrigem.nativeElement,{styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit.station.bus",stylers:[{visibility:"off"}]}],center:n,disableDefaultUI:!0,zoom:14}),this.marcadorPosicaoAtual=new google.maps.Marker({position:n,draggable:!0,map:this.map,title:"Onde estou"}),this.marcadorPosicaoAtual.setIcon("/assets/icon/person.png")},200)}setarFocoNoCampoPesquisa(){setTimeout(()=>{this.campoPesquisaOrigem.setFocus()},500)}buscarEnderedoOrigem(n){return Object(i.b)(this,void 0,void 0,(function*(){if(this.resultadosPesquisa=[],!this.enderecoOrigem&&!this.cidade)return void(yield this.utils.mensagemAviso("Por favor, informe a rua ou cidade. Depois pesquise novamente.",()=>{this.setarFocoNoCampoPesquisa()}));let o=this.enderecoOrigem||"";o=o.toLowerCase().trim(),o=o.replace("- rs","").replace("-rs","").replace(",rs","").replace(", rs","").replace(" rs","").trim(),"santa rosa"==o||"rua santa rosa"==o||"r. santa rosa"==o||"r santa rosa"==o?o="R. Santa Rosa, Santa Rosa -":n||o.startsWith("rua")||o.startsWith("r.")||o.startsWith("av")||o.startsWith("avenida")||(o="rua "+o),this.numeroOrigem&&(o+=" ",o+=this.numeroOrigem),this.cidade?(o+=" - ",o+=this.cidade,o+=" - Brasil"):(o=o.replace(" rs","").replace("-rs","").replace(",rs",""),o+=" - Santa Rosa - RS - Brasil"),yield this.utils.showSpinner();try{let t=new google.maps.Geocoder,e={};e.address=o,e.region="BR",console.log("endereco",o),t.geocode(e,(o,t)=>Object(i.b)(this,void 0,void 0,(function*(){if(yield this.utils.cancelSpinner(),"OK"==t){if(!n&&0==o.length)return void this.buscarEnderedoOrigem(!0);o.forEach(n=>{n.enderecoFormatado=this.utils.retornaEnderecoFormatado(n)}),1==o.length?(this.resultadosPesquisa=o,this.selecionaLocalOrigem(this.resultadosPesquisa[0])):o.length>8?(this.resultadosPesquisa=[],this.utils.mensagemAviso("Por favor, digite o endere\xe7o completo.")):this.resultadosPesquisa=o}else{if(this.resultadosPesquisa=[],!n)return void this.buscarEnderedoOrigem(!0);this.utils.mensagemAviso("N\xe3o foi poss\xedvel encontrar o endere\xe7o. Por favor pesquise novamente")}})))}catch(t){console.log(t),yield this.utils.cancelSpinner()}}))}selecionaLocalOrigem(n){this.marcadorPosicaoAtual&&(this.marcadorPosicaoAtual.setMap(null),this.marcadorPosicaoAtual=null);let o=n.geometry.location.toJSON();this.marcadorPosicaoAtual=new google.maps.Marker({position:o,draggable:!0,map:this.map,title:"Onde estou"}),this.marcadorPosicaoAtual.setIcon("/assets/icon/person.png"),this.map.setCenter(o),this.map.setZoom(18),this.resultadosPesquisa=[]}confirmarEndereco(n,o,t){return Object(i.b)(this,void 0,void 0,(function*(){let e={latitude:n,longitude:o,endereco:t};this.favoritarAoSair&&(e.id=(new Date).getTime(),this.nomeFavorito&&(e.nome=this.nomeFavorito),this.selecionandoLocalDestino?this.favoritos.destino.push(e):this.favoritos.origem.push(e),this.utils.gravaStorage("favoritosEndereco",this.favoritos)),this.voltar(e)}))}confirmar(){return Object(i.b)(this,void 0,void 0,(function*(){let n=this.marcadorPosicaoAtual.getPosition().lat(),o=this.marcadorPosicaoAtual.getPosition().lng();if(this.enderecoOrigem&&this.numeroOrigem){let t=this.enderecoOrigem+", "+this.numeroOrigem;return void this.utils.mensagemConfirmacao("O local do marcador no mapa est\xe1 correto?",()=>Object(i.b)(this,void 0,void 0,(function*(){this.confirmarEndereco(n,o,t)})),()=>{this.utils.mensagemAviso("Posicione o marcador corretamente no local de entrega!")})}yield this.utils.showSpinner();let t=yield this.utils.buscaEndereco(n,o);this.utils.cancelSpinner(),this.utils.mensagemConfirmacao('O endere\xe7o "'+t+'" est\xe1 correto?',()=>Object(i.b)(this,void 0,void 0,(function*(){this.confirmarEndereco(n,o,t)})),()=>{this.utils.mensagemAviso("Pesquise o endere\xe7o nos campos acima ou posicione o marcador no local de entrega!")})}))}voltar(n){this.modalController.dismiss(n)}favoritar(){this.favoritarAoSair=!this.favoritarAoSair}}return n.\u0275fac=function(o){return new(o||n)(r.Ib(e.z),r.Ib(a.a),r.Ib(b.a))},n.\u0275cmp=r.Cb({type:n,selectors:[["app-buscar-endereco"]],viewQuery:function(n,o){var t;1&n&&(r.pc(u,!0),r.pc(f,!0)),2&n&&(r.gc(t=r.Ub())&&(o.mapElementOrigem=t.first),r.gc(t=r.Ub())&&(o.campoPesquisaOrigem=t.first))},inputs:{selecionandoLocalDestino:"selecionandoLocalDestino",localSugerido:"localSugerido"},decls:27,vars:12,consts:[["appScrollbarTheme","",1,"tela-buscar-endereco",3,"fullscreen"],[1,"botao-sair-x","botao-sair-x-card",3,"click"],["name","close-outline"],[1,"fechar-modal"],[1,"input-pesquisa","rua-destino"],["placeholder","Rua ou local","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["campoPesquisaOrigem",""],[1,"input-pesquisa","numero-destino"],["placeholder","N\xba","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],[1,"buscar-endereco"],["name","search",3,"click"],[1,"sessao-favoritar"],["expand","block",1,"confirmar","favoritar",3,"click"],["name","heart-outline",4,"ngIf"],["name","heart",4,"ngIf"],["class","input-pesquisa nome-favorito",4,"ngIf"],[1,"lista-resultados-pesquisa"],[4,"ngIf"],[1,"map",3,"ngStyle"],["mapElementOrigem",""],["class","confirmar-endereco-origem",4,"ngIf"],["name","heart-outline"],["name","heart"],[1,"input-pesquisa","nome-favorito"],["placeholder","Nome do favorito (Opcional)","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],["src","/assets/icon/icon-map.png"],[1,"confirmar-endereco-origem"],["expand","block",1,"confirmar",3,"click"],["name","caret-forward-outline"]],template:function(n,o){1&n&&(r.Lb(0,"ion-content",0),r.Lb(1,"div",1),r.Tb("click",(function(){return o.voltar()})),r.Jb(2,"ion-icon",2),r.Kb(),r.Lb(3,"ion-card"),r.Lb(4,"ion-card-content"),r.Lb(5,"div",3),r.Lb(6,"h6"),r.lc(7,' Pesquise o local ou posicione o marcador no mapa. Depois clique em "Confirmar". '),r.Kb(),r.Kb(),r.Lb(8,"ion-item",4),r.Lb(9,"ion-input",5,6),r.Tb("ngModelChange",(function(n){return o.enderecoOrigem=n}))("keydown.enter",(function(){return o.buscarEnderedoOrigem()})),r.Kb(),r.Kb(),r.Lb(11,"ion-item",7),r.Lb(12,"ion-input",8),r.Tb("ngModelChange",(function(n){return o.numeroOrigem=n}))("keydown.enter",(function(){return o.buscarEnderedoOrigem()})),r.Kb(),r.Kb(),r.Lb(13,"ion-item",9),r.Lb(14,"ion-icon",10),r.Tb("click",(function(){return o.buscarEnderedoOrigem()})),r.Kb(),r.Kb(),r.Lb(15,"div",11),r.Lb(16,"ion-button",12),r.Tb("click",(function(){return o.favoritar()})),r.lc(17," FAVORITAR "),r.kc(18,h,1,0,"ion-icon",13),r.kc(19,C,1,0,"ion-icon",14),r.Kb(),r.kc(20,O,2,1,"ion-item",15),r.Kb(),r.Lb(21,"div",16),r.kc(22,M,2,0,"h5",17),r.kc(23,_,2,1,"ion-list",17),r.Kb(),r.Kb(),r.Kb(),r.Jb(24,"div",18,19),r.kc(26,x,4,0,"div",20),r.Kb()),2&n&&(r.cc("fullscreen",!0),r.yb(9),r.cc("ngModel",o.enderecoOrigem),r.yb(3),r.cc("ngModel",o.numeroOrigem),r.yb(6),r.cc("ngIf",!o.favoritarAoSair),r.yb(1),r.cc("ngIf",o.favoritarAoSair),r.yb(1),r.cc("ngIf",o.favoritarAoSair),r.yb(2),r.cc("ngIf",o.resultadosPesquisa.length>1),r.yb(1),r.cc("ngIf",o.resultadosPesquisa.length>1),r.yb(1),r.cc("ngStyle",r.fc(10,v,o.tamanhoTela+"px")),r.yb(2),r.cc("ngIf",o.marcadorPosicaoAtual))},directives:[e.h,m.a,e.j,e.f,e.g,e.l,e.k,e.D,p.g,p.h,e.e,s.l,s.m,e.n,s.k,e.d,e.m],styles:[".lista-resultados-pesquisa[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:20px;font-weight:500}.lista-resultados-pesquisa[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{white-space:normal}.tela-dados-entrega[_ngcontent-%COMP%]{text-align:center}.tela-dados-entrega[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-bottom:200px}.tela-dados-entrega[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px}.tela-dados-entrega[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-top:30px;height:60px}.tela-dados-entrega[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px}.tela-enderecos[_ngcontent-%COMP%]{--background:#eae8e3}.tela-enderecos[_ngcontent-%COMP%]   .confirmar[_ngcontent-%COMP%]{width:150px;display:inline-block}.tela-enderecos[_ngcontent-%COMP%]   .expandir-recolher[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:2.4rem;height:40px}.tela-enderecos[_ngcontent-%COMP%]   .info-enderecos[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.6509803921568628);text-align:center;padding:8px;position:fixed;top:5px;z-index:9999}.tela-enderecos[_ngcontent-%COMP%]   .map-enderecos[_ngcontent-%COMP%]{width:100%;position:absolute;top:0}.favoritos[_ngcontent-%COMP%]{text-align:left;padding:12px 12px 0}.favoritos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]{width:100%;cursor:pointer;display:flex;margin-bottom:5px;padding:5px 5px 0}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   .icone-favorito[_ngcontent-%COMP%]{color:#392b9a;font-size:1.5rem;margin-right:5px}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   .excluir[_ngcontent-%COMP%]{color:red;font-size:1.5rem}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:5px;width:100%}.tela-buscar-endereco[_ngcontent-%COMP%]{--background:#eee!important}.tela-buscar-endereco[_ngcontent-%COMP%]   .sessao-favoritar[_ngcontent-%COMP%]{text-align:center}.tela-buscar-endereco[_ngcontent-%COMP%]   .nome-favorito[_ngcontent-%COMP%]{--background:#fdfdfd;margin:auto auto 10px}.tela-buscar-endereco[_ngcontent-%COMP%]   .favoritar[_ngcontent-%COMP%]{--background:none;color:#392b9a;--box-shadow:none;font-weight:700;margin:auto}.tela-buscar-endereco[_ngcontent-%COMP%]   .input-pesquisa[_ngcontent-%COMP%]{border:solid;border-color:#abaaaa;border-width:1px;border-radius:10px;--highlight-background:#d2a65a!important;--margin-bottom:8px}.tela-buscar-endereco[_ngcontent-%COMP%]   .rua-destino[_ngcontent-%COMP%]{width:calc(100% - 150px);margin-right:8px;display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   .numero-destino[_ngcontent-%COMP%]{width:60px;display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{position:absolute;z-index:999;text-align:center;margin:10px}.tela-buscar-endereco[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:5px 5px 0}.tela-buscar-endereco[_ngcontent-%COMP%]   .buscar-endereco[_ngcontent-%COMP%]{display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   .buscar-endereco[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:40px;width:40px;--background:none;color:#392b9a;margin-left:8px;--margin-bottom:8px}.tela-buscar-endereco[_ngcontent-%COMP%]   .confirmar-endereco-origem[_ngcontent-%COMP%]{width:100%;z-index:999;padding:5px 5px 10px;background:hsla(0,0%,87.8%,.7490196078431373);position:fixed;bottom:0}.tela-buscar-endereco[_ngcontent-%COMP%]   .confirmar-endereco-origem[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:260px;margin:auto}.tela-buscar-endereco[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left;width:calc(100% - 40px)}.confirmar[_ngcontent-%COMP%]{height:45px;--border-radius:10px;--padding:20px}ion-content[_ngcontent-%COMP%]{--background:#513dd9}ion-item[_ngcontent-%COMP%]{--background-focused:#fff!important}.info[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:0}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;text-align:center}.info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#8c8c8c}.info[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px;border-bottom:solid;border-color:#e4e4e4;border-width:1px}.info[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:10px}.locais[_ngcontent-%COMP%]{margin-left:8px;width:calc(100% - 16px);position:fixed;bottom:0;margin-bottom:0;z-index:999;text-align:center}.locais[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:6px}.locais[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:8px 8px 0}.locais[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#494949}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]{z-index:9999;width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.7215686274509804);padding:10px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .sessao-1[_ngcontent-%COMP%], .botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .sessao-2[_ngcontent-%COMP%]{width:100%;max-width:300px;display:flex;margin:auto}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{color:#fff;--background:#1ac6e2;display:block;height:60px;width:100%;margin:5px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:5px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-sos[_ngcontent-%COMP%]{--background:#db2626}.botoes-confirmacao[_ngcontent-%COMP%]{z-index:9999;width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.7215686274509804);padding:10px}.botoes-confirmacao[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{--background:#1ac6e2;max-width:280px;min-width:200px;margin-bottom:10px;margin-left:auto;margin-right:auto;display:block}.botoes-confirmacao[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:5px}.botoes-confirmacao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:5px;font-weight:700}.botoes-confirmacao[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:2px}.corrida-finalizada[_ngcontent-%COMP%]{text-align:center}.botao-adicionar-entrega[_ngcontent-%COMP%]{margin-top:15px;font-size:16px;border-bottom:solid;border-width:1px;border-color:#1b3363;min-width:320px}.atualizar-corridas[_ngcontent-%COMP%]{text-align:center;font-size:40px;color:#fff;margin-top:10px}.fechar-modal[_ngcontent-%COMP%]{height:auto!important}.fechar-modal[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:10px;left:5px}.buscando-entregador[_ngcontent-%COMP%]{width:100%;margin-top:10px;margin-bottom:10px;text-align:center}.buscando-entregador[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.confirmar-dados[_ngcontent-%COMP%]{color:#fff;display:block;margin-bottom:10px}.forma-entrega[_ngcontent-%COMP%]   .botoes-forma-entrega[_ngcontent-%COMP%]{display:flex}.forma-entrega[_ngcontent-%COMP%]   .botoes-forma-entrega[_ngcontent-%COMP%]   .botao-forma-entrega[_ngcontent-%COMP%]{border:solid;border-color:grey;border-width:1px;border-radius:10px;width:30%;max-width:80px;margin:5px;padding:10px 10px 2px;cursor:pointer;opacity:.5}.forma-entrega[_ngcontent-%COMP%]   .forma-entrega-selecionada[_ngcontent-%COMP%]{border-color:#513dd9!important;border-width:3px!important;opacity:1!important}"]}),n})();var y=t("/oCc");function w(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-icon",21),r.Tb("click",(function(){r.hc(n);const o=r.Vb().$implicit;return r.Vb(2).excluirFavorito(o)})),r.Kb()}}function L(n,o){if(1&n){const n=r.Mb();r.Lb(0,"div",18),r.Lb(1,"ion-icon",19),r.Tb("click",(function(){r.hc(n);const t=o.$implicit;return r.Vb(2).selecionarFavorito(t)})),r.Kb(),r.Lb(2,"h6",6),r.Tb("click",(function(){r.hc(n);const t=o.$implicit;return r.Vb(2).selecionarFavorito(t)})),r.lc(3),r.Kb(),r.kc(4,w,1,0,"ion-icon",20),r.Kb()}if(2&n){const n=o.$implicit;r.yb(3),r.mc(n.nome||n.endereco),r.yb(1),r.cc("ngIf",!n.padrao)}}function K(n,o){if(1&n&&(r.Lb(0,"div",16),r.kc(1,L,5,2,"div",17),r.Kb()),2&n){const n=r.Vb();r.yb(1),r.cc("ngForOf",n.favoritosAtual)}}function I(n,o){1&n&&(r.Lb(0,"ion-label",10),r.lc(1,"Entrega em:"),r.Kb())}function E(n,o){1&n&&r.Jb(0,"ion-icon",22)}function z(n,o){1&n&&(r.Lb(0,"span"),r.lc(1,"Aten\xe7\xe3o. Ser\xe1 aplicada uma taxa de 2% sobre o valor cobrado"),r.Kb())}function A(n,o){1&n&&(r.Lb(0,"span"),r.lc(1,"Aten\xe7\xe3o. Ser\xe1 aplicada uma taxa de 6% sobre o valor cobrado"),r.Kb())}function S(n,o){1&n&&(r.Lb(0,"span"),r.lc(1,"Aten\xe7\xe3o. Ser\xe1 aplicada uma taxa de 6% sobre o valor cobrado"),r.Kb())}const D=function(){return{money:!0}};function T(n,o){if(1&n){const n=r.Mb();r.Lb(0,"div"),r.Lb(1,"ion-item"),r.Lb(2,"ion-label",10),r.lc(3,"Valor a cobrar"),r.Kb(),r.Lb(4,"ion-input",23),r.Tb("ngModelChange",(function(o){return r.hc(n),r.Vb().entrega.valorCobranca=o})),r.Kb(),r.Kb(),r.Lb(5,"ion-item"),r.Lb(6,"ion-label",10),r.lc(7,"Forma de cobran\xe7a"),r.Kb(),r.Lb(8,"ion-select",24),r.Tb("ngModelChange",(function(o){return r.hc(n),r.Vb().entrega.formaCobranca=o})),r.Lb(9,"ion-select-option",25),r.lc(10,"Dinheiro"),r.Kb(),r.Lb(11,"ion-select-option",26),r.lc(12,"Cart\xe3o de cr\xe9dito"),r.Kb(),r.Lb(13,"ion-select-option",27),r.lc(14,"Cart\xe3o de d\xe9bito"),r.Kb(),r.Kb(),r.Kb(),r.kc(15,z,2,0,"span",12),r.kc(16,A,2,0,"span",12),r.kc(17,S,2,0,"span",12),r.Kb()}if(2&n){const n=r.Vb();r.yb(4),r.cc("ngModel",n.entrega.valorCobranca)("brmasker",r.ec(6,D)),r.yb(4),r.cc("ngModel",n.entrega.formaCobranca),r.yb(7),r.cc("ngIf","Dinheiro"==n.entrega.formaCobranca),r.yb(1),r.cc("ngIf","Cart\xe3o de cr\xe9dito"==n.entrega.formaCobranca),r.yb(1),r.cc("ngIf","Cart\xe3o de d\xe9bito"==n.entrega.formaCobranca)}}let F=(()=>{class n{constructor(n,o,t){this.api=n,this.modalController=o,this.utils=t,this.corrida={},this.entrega={},this.usuarioLogado={_cliente:{}},this.favoritosAtual=[]}ionViewWillEnter(){this.usuarioLogado=this.api.retornaUsuarioLogado(),this.entrega&&this.entrega.sequencial||(this.entrega={},this.entrega.formaCobranca="Dinheiro"),this.carregaFavoritos()}carregaFavoritos(){let n=this.utils.retornaFavoritos(this.usuarioLogado);this.favoritosAtual=n.destino||[]}selecionarFavorito(n){this.selecionarEndereco(n.latitude,n.longitude,n.endereco)}excluirFavorito(n){let o=this.utils.retornaFavoritos(this.usuarioLogado);o.destino=o.destino.filter(o=>o.id!==n.id&&!o.padrao),this.utils.gravaStorage("favoritosEndereco",o),this.carregaFavoritos()}confirmar(){return Object(i.b)(this,void 0,void 0,(function*(){let n=this.utils.clone(this.entrega);if(n.enderecoDestino){if(n.cobrarCliente&&!n.valorCobranca)return this.utils.mensagemAviso("Informe o valor da cobran\xe7a!"),!1;n.valorCobranca&&(n.valorCobranca=parseFloat(n.valorCobranca.replace(",","."))),n.sequencial?this.corrida.entregas.forEach(o=>{o.sequencial===n.sequencial&&Object.keys(n).forEach(t=>{o[t]=n[t]})}):(n.sequencial=this.corrida.entregas.length+1,this.corrida.entregas.push(n)),this.utils.gravaStorage("corrida",this.corrida),this.modalController.dismiss(!0)}else yield this.utils.mensagemAviso("Por favor, informe o local da entrega.",()=>{this.buscarEnderecoDestino()})}))}voltar(){this.modalController.dismiss()}excluir(){this.utils.mensagemConfirmacao("Deseja cancelar esta entrega?",()=>{this.corrida.entregas=this.corrida.entregas.filter(n=>n.sequencial!==this.entrega.sequencial),this.ordenaEntregas(),this.utils.gravaStorage("corrida",this.corrida),this.utils.mensagemToaster("Esta entrega foi cancelada."),this.modalController.dismiss(!0)})}ordenaEntregas(){this.corrida.entregas.forEach(n=>{n.sequencial>this.entrega.sequencial&&n.sequencial--})}buscarEnderecoDestino(){return Object(i.b)(this,void 0,void 0,(function*(){const n=yield this.modalController.create({component:k,cssClass:"fullscreen",componentProps:{selecionandoLocalDestino:!0,localSugerido:{latitude:this.entrega.latitudeDestino,longitude:this.entrega.longitudeDestino}}});yield n.present();const{data:o}=yield n.onWillDismiss();o&&this.selecionarEndereco(o.latitude,o.longitude,o.endereco)}))}selecionarEndereco(n,o,t){this.entrega.enderecoDestino=t,this.entrega.latitudeDestino=n,this.entrega.longitudeDestino=o,this.carregaFavoritos()}alterandoCobrarCliente(){this.utils.mensagemAviso("Funcionalidade indispon\xedvel no momento."),this.entrega.cobrarCliente=!1}}return n.\u0275fac=function(o){return new(o||n)(r.Ib(c.a),r.Ib(e.z),r.Ib(b.a))},n.\u0275cmp=r.Cb({type:n,selectors:[["app-dados-entrega"]],inputs:{corrida:"corrida",entrega:"entrega"},decls:23,vars:7,consts:[["appScrollbarTheme","",1,"tela-dados-entrega",3,"fullscreen"],[1,"botao-sair-x",3,"click"],["name","close-outline"],[1,"logo-miniatura-top"],["src","/assets/logoMiniatura.png"],["class","favoritos",4,"ngIf"],[3,"click"],["position","stacked",4,"ngIf"],["placeholder","Local de entrega","readonly","",3,"ngModel","ngModelChange"],["name","search","slot","end",4,"ngIf"],["position","stacked"],["placeholder","","rows","3",3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"botoes-confirmacao"],[1,"botao-principal",3,"click"],["name","caret-forward-outline"],[1,"favoritos"],["class","favorito",4,"ngFor","ngForOf"],[1,"favorito"],["name","heart",1,"icone-favorito",3,"click"],["class","excluir","name","close-outline",3,"click",4,"ngIf"],["name","close-outline",1,"excluir",3,"click"],["name","search","slot","end"],["type","text","autocomplete","off",3,"ngModel","brmasker","ngModelChange"],["placeholder","Selecione",3,"ngModel","ngModelChange"],["value","Dinheiro"],["value","Cart\xe3o de cr\xe9dito"],["value","Cart\xe3o de d\xe9bito"]],template:function(n,o){1&n&&(r.Lb(0,"ion-content",0),r.Lb(1,"div",1),r.Tb("click",(function(){return o.voltar()})),r.Jb(2,"ion-icon",2),r.Kb(),r.Lb(3,"div",3),r.Jb(4,"img",4),r.Kb(),r.Lb(5,"ion-card"),r.Lb(6,"ion-card-content"),r.Lb(7,"h6"),r.lc(8,"Informe os dados da entrega:"),r.Kb(),r.kc(9,K,2,1,"div",5),r.Lb(10,"ion-item",6),r.Tb("click",(function(){return o.buscarEnderecoDestino()})),r.kc(11,I,2,0,"ion-label",7),r.Lb(12,"ion-input",8),r.Tb("ngModelChange",(function(n){return o.entrega.enderecoDestino=n})),r.Kb(),r.kc(13,E,1,0,"ion-icon",9),r.Kb(),r.Lb(14,"ion-item"),r.Lb(15,"ion-label",10),r.lc(16,"Anota\xe7\xf5es para o entregador"),r.Kb(),r.Lb(17,"ion-textarea",11),r.Tb("ngModelChange",(function(n){return o.entrega.descricao=n})),r.Kb(),r.Kb(),r.kc(18,T,18,7,"div",12),r.Kb(),r.Kb(),r.Lb(19,"div",13),r.Lb(20,"ion-button",14),r.Tb("click",(function(){return o.confirmar()})),r.lc(21," PR\xd3XIMO "),r.Jb(22,"ion-icon",15),r.Kb(),r.Kb(),r.Kb()),2&n&&(r.cc("fullscreen",!1),r.yb(9),r.cc("ngIf",o.favoritosAtual.length>0),r.yb(2),r.cc("ngIf",o.entrega.enderecoDestino),r.yb(1),r.cc("ngModel",o.entrega.enderecoDestino),r.yb(1),r.cc("ngIf",!o.entrega.enderecoDestino),r.yb(4),r.cc("ngModel",o.entrega.descricao),r.yb(1),r.cc("ngIf",o.entrega.cobrarCliente))},directives:[e.h,m.a,e.j,e.f,e.g,s.l,e.l,e.k,e.D,p.g,p.h,e.m,e.u,e.e,s.k,y.a,e.r,e.C,e.s],styles:[".lista-resultados-pesquisa[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:20px;font-weight:500}.lista-resultados-pesquisa[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{white-space:normal}.tela-dados-entrega[_ngcontent-%COMP%]{text-align:center}.tela-dados-entrega[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-bottom:200px}.tela-dados-entrega[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px}.tela-dados-entrega[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-top:30px;height:60px}.tela-dados-entrega[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px}.tela-enderecos[_ngcontent-%COMP%]{--background:#eae8e3}.tela-enderecos[_ngcontent-%COMP%]   .confirmar[_ngcontent-%COMP%]{width:150px;display:inline-block}.tela-enderecos[_ngcontent-%COMP%]   .expandir-recolher[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:2.4rem;height:40px}.tela-enderecos[_ngcontent-%COMP%]   .info-enderecos[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.6509803921568628);text-align:center;padding:8px;position:fixed;top:5px;z-index:9999}.tela-enderecos[_ngcontent-%COMP%]   .map-enderecos[_ngcontent-%COMP%]{width:100%;position:absolute;top:0}.favoritos[_ngcontent-%COMP%]{text-align:left;padding:12px 12px 0}.favoritos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]{width:100%;cursor:pointer;display:flex;margin-bottom:5px;padding:5px 5px 0}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   .icone-favorito[_ngcontent-%COMP%]{color:#392b9a;font-size:1.5rem;margin-right:5px}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   .excluir[_ngcontent-%COMP%]{color:red;font-size:1.5rem}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:5px;width:100%}.tela-buscar-endereco[_ngcontent-%COMP%]{--background:#eee!important}.tela-buscar-endereco[_ngcontent-%COMP%]   .sessao-favoritar[_ngcontent-%COMP%]{text-align:center}.tela-buscar-endereco[_ngcontent-%COMP%]   .nome-favorito[_ngcontent-%COMP%]{--background:#fdfdfd;margin:auto auto 10px}.tela-buscar-endereco[_ngcontent-%COMP%]   .favoritar[_ngcontent-%COMP%]{--background:none;color:#392b9a;--box-shadow:none;font-weight:700;margin:auto}.tela-buscar-endereco[_ngcontent-%COMP%]   .input-pesquisa[_ngcontent-%COMP%]{border:solid;border-color:#abaaaa;border-width:1px;border-radius:10px;--highlight-background:#d2a65a!important;--margin-bottom:8px}.tela-buscar-endereco[_ngcontent-%COMP%]   .rua-destino[_ngcontent-%COMP%]{width:calc(100% - 150px);margin-right:8px;display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   .numero-destino[_ngcontent-%COMP%]{width:60px;display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{position:absolute;z-index:999;text-align:center;margin:10px}.tela-buscar-endereco[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:5px 5px 0}.tela-buscar-endereco[_ngcontent-%COMP%]   .buscar-endereco[_ngcontent-%COMP%]{display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   .buscar-endereco[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:40px;width:40px;--background:none;color:#392b9a;margin-left:8px;--margin-bottom:8px}.tela-buscar-endereco[_ngcontent-%COMP%]   .confirmar-endereco-origem[_ngcontent-%COMP%]{width:100%;z-index:999;padding:5px 5px 10px;background:hsla(0,0%,87.8%,.7490196078431373);position:fixed;bottom:0}.tela-buscar-endereco[_ngcontent-%COMP%]   .confirmar-endereco-origem[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:260px;margin:auto}.tela-buscar-endereco[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left;width:calc(100% - 40px)}.confirmar[_ngcontent-%COMP%]{height:45px;--border-radius:10px;--padding:20px}ion-content[_ngcontent-%COMP%]{--background:#513dd9}ion-item[_ngcontent-%COMP%]{--background-focused:#fff!important}.info[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:0}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;text-align:center}.info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#8c8c8c}.info[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px;border-bottom:solid;border-color:#e4e4e4;border-width:1px}.info[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:10px}.locais[_ngcontent-%COMP%]{margin-left:8px;width:calc(100% - 16px);position:fixed;bottom:0;margin-bottom:0;z-index:999;text-align:center}.locais[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:6px}.locais[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:8px 8px 0}.locais[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#494949}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]{z-index:9999;width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.7215686274509804);padding:10px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .sessao-1[_ngcontent-%COMP%], .botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .sessao-2[_ngcontent-%COMP%]{width:100%;max-width:300px;display:flex;margin:auto}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{color:#fff;--background:#1ac6e2;display:block;height:60px;width:100%;margin:5px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:5px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-sos[_ngcontent-%COMP%]{--background:#db2626}.botoes-confirmacao[_ngcontent-%COMP%]{z-index:9999;width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.7215686274509804);padding:10px}.botoes-confirmacao[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{--background:#1ac6e2;max-width:280px;min-width:200px;margin-bottom:10px;margin-left:auto;margin-right:auto;display:block}.botoes-confirmacao[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:5px}.botoes-confirmacao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:5px;font-weight:700}.botoes-confirmacao[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:2px}.corrida-finalizada[_ngcontent-%COMP%]{text-align:center}.botao-adicionar-entrega[_ngcontent-%COMP%]{margin-top:15px;font-size:16px;border-bottom:solid;border-width:1px;border-color:#1b3363;min-width:320px}.atualizar-corridas[_ngcontent-%COMP%]{text-align:center;font-size:40px;color:#fff;margin-top:10px}.fechar-modal[_ngcontent-%COMP%]{height:auto!important}.fechar-modal[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:10px;left:5px}.buscando-entregador[_ngcontent-%COMP%]{width:100%;margin-top:10px;margin-bottom:10px;text-align:center}.buscando-entregador[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.confirmar-dados[_ngcontent-%COMP%]{color:#fff;display:block;margin-bottom:10px}.forma-entrega[_ngcontent-%COMP%]   .botoes-forma-entrega[_ngcontent-%COMP%]{display:flex}.forma-entrega[_ngcontent-%COMP%]   .botoes-forma-entrega[_ngcontent-%COMP%]   .botao-forma-entrega[_ngcontent-%COMP%]{border:solid;border-color:grey;border-width:1px;border-radius:10px;width:30%;max-width:80px;margin:5px;padding:10px 10px 2px;cursor:pointer;opacity:.5}.forma-entrega[_ngcontent-%COMP%]   .forma-entrega-selecionada[_ngcontent-%COMP%]{border-color:#513dd9!important;border-width:3px!important;opacity:1!important}"]}),n})();var V=t("wd/R");function q(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-icon",32),r.Tb("click",(function(){r.hc(n);const o=r.Vb().$implicit;return r.Vb(2).excluirFavorito(o)})),r.Kb()}}function R(n,o){if(1&n){const n=r.Mb();r.Lb(0,"div",28),r.Lb(1,"ion-icon",29),r.Tb("click",(function(){r.hc(n);const t=o.$implicit;return r.Vb(2).selecionarFavorito(t)})),r.Kb(),r.Lb(2,"h6",30),r.Tb("click",(function(){r.hc(n);const t=o.$implicit;return r.Vb(2).selecionarFavorito(t)})),r.lc(3),r.Kb(),r.kc(4,q,1,0,"ion-icon",31),r.Kb()}if(2&n){const n=o.$implicit;r.yb(3),r.mc(n.nome||n.endereco),r.yb(1),r.cc("ngIf",!n.padrao)}}function J(n,o){if(1&n&&(r.Lb(0,"div",26),r.kc(1,R,5,2,"div",27),r.Kb()),2&n){const n=r.Vb();r.yb(1),r.cc("ngForOf",n.favoritosAtual)}}function j(n,o){1&n&&(r.Lb(0,"ion-label",33),r.lc(1,"Retirar no endere\xe7o:"),r.Kb())}function N(n,o){1&n&&r.Jb(0,"ion-icon",34)}function H(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-item"),r.Lb(1,"ion-label",35),r.lc(2,"Levar/Entregar m\xe1quina de cart\xe3o"),r.Kb(),r.Lb(3,"ion-toggle",36),r.Tb("ngModelChange",(function(o){return r.hc(n),r.Vb().corrida.maquinaCartao=o})),r.Kb(),r.Kb()}if(2&n){const n=r.Vb();r.yb(3),r.cc("ngModel",n.corrida.maquinaCartao)}}const Y=function(n){return{"forma-entrega-selecionada":n}};let W=(()=>{class n{constructor(n,o,t){this.api=n,this.modalController=o,this.utils=t,this.corrida={},this.usuarioLogado={_cliente:{}},this.favoritosAtual=[]}ionViewWillEnter(){this.usuarioLogado=this.api.retornaUsuarioLogado(),this.carregaFavoritos()}carregaFavoritos(){let n=this.utils.retornaFavoritos(this.usuarioLogado);this.favoritosAtual=n.origem||[]}excluirFavorito(n){let o=this.utils.retornaFavoritos(this.usuarioLogado);o.origem=o.origem.filter(o=>o.id!==n.id&&!o.padrao),this.utils.gravaStorage("favoritosEndereco",o),this.carregaFavoritos()}selecionarFavorito(n){this.selecionaEnderecoCliente(n.latitude,n.longitude,n.endereco)}confirmar(n){return Object(i.b)(this,void 0,void 0,(function*(){if(this.corrida.tempoMaximoEspera=n,"AGENDAR"===n)this.corrida.agendarEntrega=!0;else{let o=V();"SOS"===n?o.add(20,"minutes"):"2HORAS"===n?o.add(120,"minutes"):"4HORAS"===n&&o.add(240,"minutes"),this.corrida.horaMaximaRetirada=o.toDate()}let o=this.utils.clone(this.corrida);o.enderecoOrigem?(this.utils.gravaStorage("corrida",o),this.modalController.dismiss(!o.agendarEntrega||{agendar:!0})):yield this.utils.mensagemAviso("Por favor, informe o local de partida.",()=>{this.buscarEnderecoOrigem()})}))}buscarEnderecoOrigem(){return Object(i.b)(this,void 0,void 0,(function*(){let n=this.api.retornaUsuarioLogado();const o=yield this.modalController.create({component:k,cssClass:"fullscreen",componentProps:{selecionandoLocalDestino:!1,localSugerido:{latitude:n._cliente.latitudeAtual,longitude:n._cliente.longitudeAtual}}});yield o.present();const{data:t}=yield o.onWillDismiss();t&&this.selecionaEnderecoCliente(t.latitude,t.longitude,t.endereco)}))}selecionaEnderecoCliente(n,o,t){return Object(i.b)(this,void 0,void 0,(function*(){let e=this.api.retornaUsuarioLogado();e._cliente.latitudeAtual=n,e._cliente.longitudeAtual=o,e._cliente.enderecoAtual=t,this.corrida.enderecoOrigem=t,this.corrida.latitudeOrigem=n,this.corrida.longitudeOrigem=o,this.utils.gravaStorage(this.api.chaveUsuarioLogadoStorage,e),this.carregaFavoritos()}))}voltar(){this.modalController.dismiss()}}return n.\u0275fac=function(o){return new(o||n)(r.Ib(c.a),r.Ib(e.z),r.Ib(b.a))},n.\u0275cmp=r.Cb({type:n,selectors:[["app-dados-corrida"]],inputs:{corrida:"corrida"},decls:47,vars:12,consts:[["appScrollbarTheme","",1,"tela-dados-entrega",3,"fullscreen"],[1,"botao-sair-x",3,"click"],["name","close-outline"],[1,"logo-miniatura-top"],["src","/assets/logoMiniatura.png"],[1,"forma-entrega"],[1,"botoes-forma-entrega"],[1,"botao-forma-entrega",2,"margin-left","auto",3,"ngClass","click"],["src","assets/icon/moto.png"],[1,"botao-forma-entrega",2,"margin-right","auto",3,"ngClass","click"],["src","assets/icon/carro.png"],["class","favoritos",4,"ngIf"],[1,"input-pesquisa",3,"click"],["position","stacked",4,"ngIf"],["placeholder","Retirar em","readonly","",3,"ngModel","ngModelChange"],["name","search","slot","end",4,"ngIf"],[4,"ngIf"],[1,"botoes-confirmacao-dados-corrida"],[2,"color","white"],[1,"sessao-1"],[1,"botao-principal",3,"click"],["name","time-outline"],[1,"sessao-2"],[1,"botao-principal","botao-sos",3,"click"],["name","warning-outline"],["name","calendar-outline"],[1,"favoritos"],["class","favorito",4,"ngFor","ngForOf"],[1,"favorito"],["name","heart",1,"icone-favorito",3,"click"],[3,"click"],["class","excluir","name","close-outline",3,"click",4,"ngIf"],["name","close-outline",1,"excluir",3,"click"],["position","stacked"],["name","search","slot","end"],[2,"white-space","normal"],["slot","start",3,"ngModel","ngModelChange"]],template:function(n,o){1&n&&(r.Lb(0,"ion-content",0),r.Lb(1,"div",1),r.Tb("click",(function(){return o.voltar()})),r.Jb(2,"ion-icon",2),r.Kb(),r.Lb(3,"div",3),r.Jb(4,"img",4),r.Kb(),r.Lb(5,"ion-card"),r.Lb(6,"ion-card-content"),r.Lb(7,"h6"),r.lc(8,'Informe os dados abaixo e clique em "Pr\xf3ximo".'),r.Kb(),r.Lb(9,"div",5),r.Lb(10,"div",6),r.Lb(11,"div",7),r.Tb("click",(function(){return o.corrida.formaEntrega="Moto"})),r.Jb(12,"img",8),r.Lb(13,"span"),r.lc(14,"Moto"),r.Kb(),r.Kb(),r.Lb(15,"div",9),r.Tb("click",(function(){return o.corrida.formaEntrega="Carro"})),r.Jb(16,"img",10),r.Lb(17,"span"),r.lc(18,"Carro"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.kc(19,J,2,1,"div",11),r.Lb(20,"ion-item",12),r.Tb("click",(function(){return o.buscarEnderecoOrigem()})),r.kc(21,j,2,0,"ion-label",13),r.Lb(22,"ion-input",14),r.Tb("ngModelChange",(function(n){return o.corrida.enderecoOrigem=n})),r.Kb(),r.kc(23,N,1,0,"ion-icon",15),r.Kb(),r.kc(24,H,4,1,"ion-item",16),r.Kb(),r.Kb(),r.Lb(25,"div",17),r.Lb(26,"div"),r.Lb(27,"span",18),r.lc(28,"Prazo de entrega:"),r.Kb(),r.Kb(),r.Lb(29,"div",19),r.Lb(30,"ion-button",20),r.Tb("click",(function(){return o.confirmar("2HORAS")})),r.Lb(31,"div"),r.Jb(32,"ion-icon",21),r.lc(33," AT\xc9 2 HORAS "),r.Kb(),r.Kb(),r.Lb(34,"ion-button",20),r.Tb("click",(function(){return o.confirmar("4HORAS")})),r.Lb(35,"div"),r.Jb(36,"ion-icon",21),r.lc(37," AT\xc9 4 HORAS "),r.Kb(),r.Kb(),r.Kb(),r.Lb(38,"div",22),r.Lb(39,"ion-button",23),r.Tb("click",(function(){return o.confirmar("SOS")})),r.Lb(40,"div"),r.Jb(41,"ion-icon",24),r.lc(42," SOS "),r.Kb(),r.Kb(),r.Lb(43,"ion-button",20),r.Tb("click",(function(){return o.confirmar("AGENDAR")})),r.Lb(44,"div"),r.Jb(45,"ion-icon",25),r.lc(46," AGENDAR "),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&n&&(r.cc("fullscreen",!1),r.yb(11),r.cc("ngClass",r.fc(8,Y,"Moto"===o.corrida.formaEntrega)),r.yb(4),r.cc("ngClass",r.fc(10,Y,"Carro"===o.corrida.formaEntrega)),r.yb(4),r.cc("ngIf",o.favoritosAtual.length>0),r.yb(2),r.cc("ngIf",o.corrida.enderecoOrigem),r.yb(1),r.cc("ngModel",o.corrida.enderecoOrigem),r.yb(1),r.cc("ngIf",!o.corrida.enderecoOrigem),r.yb(1),r.cc("ngIf",o.usuarioLogado._cliente.permiteMaquininha))},directives:[e.h,m.a,e.j,e.f,e.g,s.j,s.l,e.l,e.k,e.D,p.g,p.h,e.e,s.k,e.m,e.v,e.b],styles:[".lista-resultados-pesquisa[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:20px;font-weight:500}.lista-resultados-pesquisa[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{white-space:normal}.tela-dados-entrega[_ngcontent-%COMP%]{text-align:center}.tela-dados-entrega[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-bottom:200px}.tela-dados-entrega[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px}.tela-dados-entrega[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-top:30px;height:60px}.tela-dados-entrega[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px}.tela-enderecos[_ngcontent-%COMP%]{--background:#eae8e3}.tela-enderecos[_ngcontent-%COMP%]   .confirmar[_ngcontent-%COMP%]{width:150px;display:inline-block}.tela-enderecos[_ngcontent-%COMP%]   .expandir-recolher[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:2.4rem;height:40px}.tela-enderecos[_ngcontent-%COMP%]   .info-enderecos[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.6509803921568628);text-align:center;padding:8px;position:fixed;top:5px;z-index:9999}.tela-enderecos[_ngcontent-%COMP%]   .map-enderecos[_ngcontent-%COMP%]{width:100%;position:absolute;top:0}.favoritos[_ngcontent-%COMP%]{text-align:left;padding:12px 12px 0}.favoritos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]{width:100%;cursor:pointer;display:flex;margin-bottom:5px;padding:5px 5px 0}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   .icone-favorito[_ngcontent-%COMP%]{color:#392b9a;font-size:1.5rem;margin-right:5px}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   .excluir[_ngcontent-%COMP%]{color:red;font-size:1.5rem}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:5px;width:100%}.tela-buscar-endereco[_ngcontent-%COMP%]{--background:#eee!important}.tela-buscar-endereco[_ngcontent-%COMP%]   .sessao-favoritar[_ngcontent-%COMP%]{text-align:center}.tela-buscar-endereco[_ngcontent-%COMP%]   .nome-favorito[_ngcontent-%COMP%]{--background:#fdfdfd;margin:auto auto 10px}.tela-buscar-endereco[_ngcontent-%COMP%]   .favoritar[_ngcontent-%COMP%]{--background:none;color:#392b9a;--box-shadow:none;font-weight:700;margin:auto}.tela-buscar-endereco[_ngcontent-%COMP%]   .input-pesquisa[_ngcontent-%COMP%]{border:solid;border-color:#abaaaa;border-width:1px;border-radius:10px;--highlight-background:#d2a65a!important;--margin-bottom:8px}.tela-buscar-endereco[_ngcontent-%COMP%]   .rua-destino[_ngcontent-%COMP%]{width:calc(100% - 150px);margin-right:8px;display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   .numero-destino[_ngcontent-%COMP%]{width:60px;display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{position:absolute;z-index:999;text-align:center;margin:10px}.tela-buscar-endereco[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:5px 5px 0}.tela-buscar-endereco[_ngcontent-%COMP%]   .buscar-endereco[_ngcontent-%COMP%]{display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   .buscar-endereco[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:40px;width:40px;--background:none;color:#392b9a;margin-left:8px;--margin-bottom:8px}.tela-buscar-endereco[_ngcontent-%COMP%]   .confirmar-endereco-origem[_ngcontent-%COMP%]{width:100%;z-index:999;padding:5px 5px 10px;background:hsla(0,0%,87.8%,.7490196078431373);position:fixed;bottom:0}.tela-buscar-endereco[_ngcontent-%COMP%]   .confirmar-endereco-origem[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:260px;margin:auto}.tela-buscar-endereco[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left;width:calc(100% - 40px)}.confirmar[_ngcontent-%COMP%]{height:45px;--border-radius:10px;--padding:20px}ion-content[_ngcontent-%COMP%]{--background:#513dd9}ion-item[_ngcontent-%COMP%]{--background-focused:#fff!important}.info[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:0}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;text-align:center}.info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#8c8c8c}.info[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px;border-bottom:solid;border-color:#e4e4e4;border-width:1px}.info[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:10px}.locais[_ngcontent-%COMP%]{margin-left:8px;width:calc(100% - 16px);position:fixed;bottom:0;margin-bottom:0;z-index:999;text-align:center}.locais[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:6px}.locais[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:8px 8px 0}.locais[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#494949}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]{z-index:9999;width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.7215686274509804);padding:10px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .sessao-1[_ngcontent-%COMP%], .botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .sessao-2[_ngcontent-%COMP%]{width:100%;max-width:300px;display:flex;margin:auto}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{color:#fff;--background:#1ac6e2;display:block;height:60px;width:100%;margin:5px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:5px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-sos[_ngcontent-%COMP%]{--background:#db2626}.botoes-confirmacao[_ngcontent-%COMP%]{z-index:9999;width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.7215686274509804);padding:10px}.botoes-confirmacao[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{--background:#1ac6e2;max-width:280px;min-width:200px;margin-bottom:10px;margin-left:auto;margin-right:auto;display:block}.botoes-confirmacao[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:5px}.botoes-confirmacao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:5px;font-weight:700}.botoes-confirmacao[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:2px}.corrida-finalizada[_ngcontent-%COMP%]{text-align:center}.botao-adicionar-entrega[_ngcontent-%COMP%]{margin-top:15px;font-size:16px;border-bottom:solid;border-width:1px;border-color:#1b3363;min-width:320px}.atualizar-corridas[_ngcontent-%COMP%]{text-align:center;font-size:40px;color:#fff;margin-top:10px}.fechar-modal[_ngcontent-%COMP%]{height:auto!important}.fechar-modal[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:10px;left:5px}.buscando-entregador[_ngcontent-%COMP%]{width:100%;margin-top:10px;margin-bottom:10px;text-align:center}.buscando-entregador[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.confirmar-dados[_ngcontent-%COMP%]{color:#fff;display:block;margin-bottom:10px}.forma-entrega[_ngcontent-%COMP%]   .botoes-forma-entrega[_ngcontent-%COMP%]{display:flex}.forma-entrega[_ngcontent-%COMP%]   .botoes-forma-entrega[_ngcontent-%COMP%]   .botao-forma-entrega[_ngcontent-%COMP%]{border:solid;border-color:grey;border-width:1px;border-radius:10px;width:30%;max-width:80px;margin:5px;padding:10px 10px 2px;cursor:pointer;opacity:.5}.forma-entrega[_ngcontent-%COMP%]   .forma-entrega-selecionada[_ngcontent-%COMP%]{border-color:#513dd9!important;border-width:3px!important;opacity:1!important}"]}),n})();const U=function(){return{mask:"00:00",len:5,type:"num"}};let $=(()=>{class n{constructor(n,o){this.modalController=n,this.utils=o,this.dataMinima=V().format("YYYY-MM-DD"),this.dataEntrega=V().format("YYYY-MM-DD")}ionViewWillEnter(){let n=(parseInt(V().format("HH"))+1).toString();1==n.length&&(n="0"+n),"24"===n&&(n="00"),this.horaEntrega=n+":00"}confirmar(){return Object(i.b)(this,void 0,void 0,(function*(){let n=this.horaEntrega,o=this.dataEntrega;if(!o||!n)return this.utils.mensagemAviso("Informe a data e hora da entrega!"),!1;if(n=n.replace(":",""),4!=n.length||parseFloat(n)>2359)return this.utils.mensagemAviso("Informe a hora corretamente!"),!1;let t=V(o).format("DD/MM/YYYY");t+=" ",t+=n;let e=V(t,"DD/MM/YYYY HHmm"),a=e.toDate();if(e<V())return this.utils.mensagemAviso("Data do agendamento n\xe3o pode ser menor que data atual!"),!1;this.modalController.dismiss({dataHoraEntrega:a,horaEntrega:n,dataEntrega:this.dataEntrega})}))}voltar(){this.modalController.dismiss()}}return n.\u0275fac=function(o){return new(o||n)(r.Ib(e.z),r.Ib(b.a))},n.\u0275cmp=r.Cb({type:n,selectors:[["app-agendar-corrida"]],decls:19,vars:6,consts:[["appScrollbarTheme","",1,"tela-dados-entrega",3,"fullscreen"],[1,"botao-sair-x",3,"click"],["name","close-outline"],[1,"logo-miniatura-top"],["src","/assets/logoMiniatura.png"],["position","stacked"],["displayFormat","DD/MM/YYYY","doneText","Pronto","cancelText","Cancelar",3,"min","ngModel","ngModelChange"],["typeInput","tel","autocomplete","off",3,"brmasker","ngModel","ngModelChange"],[1,"botoes-confirmacao"],[1,"botao-principal",3,"click"],["name","caret-forward-outline"]],template:function(n,o){1&n&&(r.Lb(0,"ion-content",0),r.Lb(1,"div",1),r.Tb("click",(function(){return o.voltar()})),r.Jb(2,"ion-icon",2),r.Kb(),r.Lb(3,"div",3),r.Jb(4,"img",4),r.Kb(),r.Lb(5,"ion-card"),r.Lb(6,"ion-card-content"),r.Lb(7,"ion-item"),r.Lb(8,"ion-label",5),r.lc(9,"Agendar para"),r.Kb(),r.Lb(10,"ion-datetime",6),r.Tb("ngModelChange",(function(n){return o.dataEntrega=n})),r.Kb(),r.Kb(),r.Lb(11,"ion-item"),r.Lb(12,"ion-label",5),r.lc(13,"Hora da retirada"),r.Kb(),r.Lb(14,"ion-input",7),r.Tb("ngModelChange",(function(n){return o.horaEntrega=n})),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(15,"div",8),r.Lb(16,"ion-button",9),r.Tb("click",(function(){return o.confirmar()})),r.lc(17," PR\xd3XIMO "),r.Jb(18,"ion-icon",10),r.Kb(),r.Kb(),r.Kb()),2&n&&(r.cc("fullscreen",!1),r.yb(10),r.cc("min",o.dataMinima)("ngModel",o.dataEntrega),r.yb(4),r.cc("brmasker",r.ec(5,U))("ngModel",o.horaEntrega))},directives:[e.h,m.a,e.j,e.f,e.g,e.l,e.m,e.i,e.C,p.g,p.h,e.k,e.D,y.a,e.e],styles:[".lista-resultados-pesquisa[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:20px;font-weight:500}.lista-resultados-pesquisa[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{white-space:normal}.tela-dados-entrega[_ngcontent-%COMP%]{text-align:center}.tela-dados-entrega[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-bottom:200px}.tela-dados-entrega[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px}.tela-dados-entrega[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-top:30px;height:60px}.tela-dados-entrega[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px}.tela-enderecos[_ngcontent-%COMP%]{--background:#eae8e3}.tela-enderecos[_ngcontent-%COMP%]   .confirmar[_ngcontent-%COMP%]{width:150px;display:inline-block}.tela-enderecos[_ngcontent-%COMP%]   .expandir-recolher[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:2.4rem;height:40px}.tela-enderecos[_ngcontent-%COMP%]   .info-enderecos[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.6509803921568628);text-align:center;padding:8px;position:fixed;top:5px;z-index:9999}.tela-enderecos[_ngcontent-%COMP%]   .map-enderecos[_ngcontent-%COMP%]{width:100%;position:absolute;top:0}.favoritos[_ngcontent-%COMP%]{text-align:left;padding:12px 12px 0}.favoritos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]{width:100%;cursor:pointer;display:flex;margin-bottom:5px;padding:5px 5px 0}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   .icone-favorito[_ngcontent-%COMP%]{color:#392b9a;font-size:1.5rem;margin-right:5px}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   .excluir[_ngcontent-%COMP%]{color:red;font-size:1.5rem}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:5px;width:100%}.tela-buscar-endereco[_ngcontent-%COMP%]{--background:#eee!important}.tela-buscar-endereco[_ngcontent-%COMP%]   .sessao-favoritar[_ngcontent-%COMP%]{text-align:center}.tela-buscar-endereco[_ngcontent-%COMP%]   .nome-favorito[_ngcontent-%COMP%]{--background:#fdfdfd;margin:auto auto 10px}.tela-buscar-endereco[_ngcontent-%COMP%]   .favoritar[_ngcontent-%COMP%]{--background:none;color:#392b9a;--box-shadow:none;font-weight:700;margin:auto}.tela-buscar-endereco[_ngcontent-%COMP%]   .input-pesquisa[_ngcontent-%COMP%]{border:solid;border-color:#abaaaa;border-width:1px;border-radius:10px;--highlight-background:#d2a65a!important;--margin-bottom:8px}.tela-buscar-endereco[_ngcontent-%COMP%]   .rua-destino[_ngcontent-%COMP%]{width:calc(100% - 150px);margin-right:8px;display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   .numero-destino[_ngcontent-%COMP%]{width:60px;display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{position:absolute;z-index:999;text-align:center;margin:10px}.tela-buscar-endereco[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:5px 5px 0}.tela-buscar-endereco[_ngcontent-%COMP%]   .buscar-endereco[_ngcontent-%COMP%]{display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   .buscar-endereco[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:40px;width:40px;--background:none;color:#392b9a;margin-left:8px;--margin-bottom:8px}.tela-buscar-endereco[_ngcontent-%COMP%]   .confirmar-endereco-origem[_ngcontent-%COMP%]{width:100%;z-index:999;padding:5px 5px 10px;background:hsla(0,0%,87.8%,.7490196078431373);position:fixed;bottom:0}.tela-buscar-endereco[_ngcontent-%COMP%]   .confirmar-endereco-origem[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:260px;margin:auto}.tela-buscar-endereco[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left;width:calc(100% - 40px)}.confirmar[_ngcontent-%COMP%]{height:45px;--border-radius:10px;--padding:20px}ion-content[_ngcontent-%COMP%]{--background:#513dd9}ion-item[_ngcontent-%COMP%]{--background-focused:#fff!important}.info[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:0}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;text-align:center}.info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#8c8c8c}.info[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px;border-bottom:solid;border-color:#e4e4e4;border-width:1px}.info[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:10px}.locais[_ngcontent-%COMP%]{margin-left:8px;width:calc(100% - 16px);position:fixed;bottom:0;margin-bottom:0;z-index:999;text-align:center}.locais[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:6px}.locais[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:8px 8px 0}.locais[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#494949}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]{z-index:9999;width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.7215686274509804);padding:10px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .sessao-1[_ngcontent-%COMP%], .botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .sessao-2[_ngcontent-%COMP%]{width:100%;max-width:300px;display:flex;margin:auto}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{color:#fff;--background:#1ac6e2;display:block;height:60px;width:100%;margin:5px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:5px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-sos[_ngcontent-%COMP%]{--background:#db2626}.botoes-confirmacao[_ngcontent-%COMP%]{z-index:9999;width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.7215686274509804);padding:10px}.botoes-confirmacao[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{--background:#1ac6e2;max-width:280px;min-width:200px;margin-bottom:10px;margin-left:auto;margin-right:auto;display:block}.botoes-confirmacao[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:5px}.botoes-confirmacao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:5px;font-weight:700}.botoes-confirmacao[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:2px}.corrida-finalizada[_ngcontent-%COMP%]{text-align:center}.botao-adicionar-entrega[_ngcontent-%COMP%]{margin-top:15px;font-size:16px;border-bottom:solid;border-width:1px;border-color:#1b3363;min-width:320px}.atualizar-corridas[_ngcontent-%COMP%]{text-align:center;font-size:40px;color:#fff;margin-top:10px}.fechar-modal[_ngcontent-%COMP%]{height:auto!important}.fechar-modal[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:10px;left:5px}.buscando-entregador[_ngcontent-%COMP%]{width:100%;margin-top:10px;margin-bottom:10px;text-align:center}.buscando-entregador[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.confirmar-dados[_ngcontent-%COMP%]{color:#fff;display:block;margin-bottom:10px}.forma-entrega[_ngcontent-%COMP%]   .botoes-forma-entrega[_ngcontent-%COMP%]{display:flex}.forma-entrega[_ngcontent-%COMP%]   .botoes-forma-entrega[_ngcontent-%COMP%]   .botao-forma-entrega[_ngcontent-%COMP%]{border:solid;border-color:grey;border-width:1px;border-radius:10px;width:30%;max-width:80px;margin:5px;padding:10px 10px 2px;cursor:pointer;opacity:.5}.forma-entrega[_ngcontent-%COMP%]   .forma-entrega-selecionada[_ngcontent-%COMP%]{border-color:#513dd9!important;border-width:3px!important;opacity:1!important}"]}),n})();var B=t("Rzux"),G=t("Bfh1"),X=t("/XPu");function Z(n,o){if(1&n){const n=r.Mb();r.Lb(0,"div",21),r.Tb("click",(function(){return r.hc(n),r.Vb().buscarCorrida()})),r.Jb(1,"ion-icon",22),r.Kb()}}function Q(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-button",23),r.Tb("click",(function(){return r.hc(n),r.Vb().utils.solicitarCentral()})),r.Lb(1,"span"),r.lc(2,"PRECISO DE AJUDA"),r.Kb(),r.Jb(3,"ion-icon",24),r.Kb()}}function nn(n,o){1&n&&(r.Lb(0,"h2",25),r.lc(1,"Corrida finalizada"),r.Kb())}function on(n,o){1&n&&(r.Lb(0,"h4"),r.lc(1,"Sim"),r.Kb())}function tn(n,o){1&n&&(r.Lb(0,"h4"),r.lc(1,"N\xe3o"),r.Kb())}function en(n,o){if(1&n&&(r.Lb(0,"div",9),r.Lb(1,"h6"),r.lc(2,"Levar/Entregar m\xe1quina de cart\xe3o"),r.Kb(),r.kc(3,on,2,0,"h4",11),r.kc(4,tn,2,0,"h4",11),r.Kb()),2&n){const n=r.Vb();r.yb(3),r.cc("ngIf",n.corrida.maquinaCartao),r.yb(1),r.cc("ngIf",!n.corrida.maquinaCartao)}}function an(n,o){if(1&n&&(r.Lb(0,"div",9),r.Lb(1,"h6"),r.lc(2,"Hora m\xe1xima de retirada:"),r.Kb(),r.Lb(3,"h4"),r.lc(4),r.Wb(5,"date"),r.Kb(),r.Kb()),2&n){const n=r.Vb();r.yb(4),r.mc(r.Yb(5,1,n.corrida.horaMaximaRetirada,"HH:mm","GMT--3"))}}function rn(n,o){1&n&&(r.Lb(0,"h4"),r.lc(1,"Sim"),r.Kb())}function cn(n,o){1&n&&(r.Lb(0,"h4"),r.lc(1,"N\xe3o"),r.Kb())}function sn(n,o){if(1&n&&(r.Lb(0,"div",9),r.Lb(1,"h6"),r.lc(2,"Data e hora:"),r.Kb(),r.Lb(3,"h4"),r.lc(4),r.Wb(5,"date"),r.Kb(),r.Kb()),2&n){const n=r.Vb();r.yb(4),r.mc(r.Yb(5,1,n.corrida.dataHoraEntrega,"dd/MM/yyyy HH:mm","GMT--3"))}}function dn(n,o){1&n&&(r.Lb(0,"ion-button",26),r.Lb(1,"span"),r.lc(2,"ALTERAR"),r.Kb(),r.Jb(3,"ion-icon",27),r.Kb())}function gn(n,o){if(1&n&&(r.Lb(0,"h2"),r.lc(1),r.Kb()),2&n){const n=r.Vb().$implicit,o=r.Vb();r.yb(1),r.nc("Detalhes da entrega ",o.corrida.entregas.length>1?n.sequencial:"","")}}function ln(n,o){1&n&&(r.Lb(0,"h2"),r.lc(1,"Entrega finalizada"),r.Kb())}function bn(n,o){1&n&&(r.Lb(0,"h4"),r.lc(1,"Sim"),r.Kb())}function mn(n,o){1&n&&(r.Lb(0,"h4"),r.lc(1,"N\xe3o"),r.Kb())}function pn(n,o){if(1&n&&(r.Lb(0,"div",9),r.Lb(1,"h6"),r.lc(2,"Valor para cobrar:"),r.Kb(),r.Lb(3,"h4"),r.lc(4),r.Wb(5,"currency"),r.Kb(),r.Kb()),2&n){const n=r.Vb().$implicit;r.yb(4),r.mc(r.Zb(5,1,n.valorCobranca,"BRL",!0,"1.2"))}}function un(n,o){if(1&n&&(r.Lb(0,"div",9),r.Lb(1,"h6"),r.lc(2,"Forma de cobran\xe7a:"),r.Kb(),r.Lb(3,"h4"),r.lc(4),r.Kb(),r.Kb()),2&n){const n=r.Vb().$implicit;r.yb(4),r.mc(n.formaCobranca)}}function fn(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-button",29),r.Tb("click",(function(){r.hc(n);const o=r.Vb().$implicit;return r.Vb().compartilharCorrida(o)})),r.lc(1," COMPARTILHAR "),r.Jb(2,"ion-icon",30),r.Kb()}}function hn(n,o){1&n&&(r.Lb(0,"ion-button",26),r.Lb(1,"span"),r.lc(2,"ALTERAR"),r.Kb(),r.Jb(3,"ion-icon",27),r.Kb())}function Cn(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-card",7),r.Tb("click",(function(){r.hc(n);const t=o.$implicit;return r.Vb().alteraDadosEntrega(t)})),r.Lb(1,"ion-card-content"),r.kc(2,gn,2,1,"h2",11),r.kc(3,ln,2,0,"h2",11),r.Lb(4,"div",9),r.Lb(5,"h6"),r.lc(6,"Local de entrega:"),r.Kb(),r.Lb(7,"h4"),r.lc(8),r.Kb(),r.Kb(),r.Lb(9,"div",9),r.Lb(10,"h6"),r.lc(11,"Entrega a cobrar?"),r.Kb(),r.kc(12,bn,2,0,"h4",11),r.kc(13,mn,2,0,"h4",11),r.Kb(),r.kc(14,pn,6,6,"div",10),r.kc(15,un,5,1,"div",10),r.kc(16,fn,3,0,"ion-button",28),r.kc(17,hn,4,0,"ion-button",12),r.Kb(),r.Kb()}if(2&n){const n=o.$implicit,t=r.Vb();r.yb(2),r.cc("ngIf",!n.dataFinalizada),r.yb(1),r.cc("ngIf",n.dataFinalizada),r.yb(5),r.mc(n.enderecoDestino?n.enderecoDestino:"N\xe3o informado"),r.yb(4),r.cc("ngIf",n.cobrarCliente),r.yb(1),r.cc("ngIf",!n.cobrarCliente),r.yb(1),r.cc("ngIf",n.cobrarCliente),r.yb(1),r.cc("ngIf",n.cobrarCliente),r.yb(1),r.cc("ngIf",t.corrida._id),r.yb(1),r.cc("ngIf",!n._id)}}function On(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-button",31),r.Tb("click",(function(){return r.hc(n),r.Vb().alteraDadosEntrega()})),r.Lb(1,"span"),r.lc(2,"ADICIONAR ENTREGA"),r.Kb(),r.Jb(3,"ion-icon",32),r.Kb()}}function Mn(n,o){if(1&n&&(r.Lb(0,"h2"),r.lc(1),r.Kb()),2&n){const n=r.Vb(2);r.yb(1),r.nc("ID: ",n.corrida.id,"")}}function Pn(n,o){1&n&&(r.Lb(0,"h2"),r.lc(1,"Entrega confirmada "),r.Kb())}function _n(n,o){1&n&&(r.Lb(0,"h2"),r.lc(1,"Confirma\xe7\xe3o pendente"),r.Kb())}function xn(n,o){if(1&n&&(r.Lb(0,"h4"),r.lc(1),r.Kb()),2&n){const n=r.Vb(2);r.yb(1),r.mc(n.corrida._entregador.nome)}}function vn(n,o){1&n&&(r.Lb(0,"h4",37),r.lc(1,"N\xe3o confirmado"),r.Kb())}function kn(n,o){if(1&n&&(r.Lb(0,"span"),r.lc(1),r.Kb()),2&n){const n=r.Vb(3);r.yb(1),r.nc("Aguardando resposta no(s) pr\xf3ximo(s) ",n.tempoChamadaAtual," minuto(s)")}}function yn(n,o){if(1&n&&(r.Lb(0,"div",38),r.Jb(1,"ion-spinner"),r.Lb(2,"span"),r.lc(3),r.Jb(4,"br"),r.kc(5,kn,2,1,"span",11),r.Jb(6,"br"),r.lc(7,"Em breve voc\xea receber\xe1 a confirma\xe7\xe3o do entregador. "),r.Kb(),r.Kb()),2&n){const n=r.Vb(2);r.yb(3),r.nc("Chamando o entregador ",n.contadorChamadaAtual,". "),r.yb(2),r.cc("ngIf",n.tempoChamadaAtual)}}function wn(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-button",39),r.Tb("click",(function(){return r.hc(n),r.Vb(2).cancelarCorrida()})),r.lc(1," CANCELAR PEDIDO "),r.Jb(2,"ion-icon",2),r.Kb()}}function Ln(n,o){if(1&n&&(r.Lb(0,"ion-card",33),r.Lb(1,"ion-card-content"),r.kc(2,Mn,2,1,"h2",11),r.kc(3,Pn,2,0,"h2",11),r.kc(4,_n,2,0,"h2",11),r.Lb(5,"div",9),r.Lb(6,"h6"),r.lc(7,"Valor da entrega:"),r.Kb(),r.Lb(8,"h4"),r.lc(9),r.Wb(10,"currency"),r.Kb(),r.Kb(),r.Lb(11,"div",9),r.Lb(12,"h6"),r.lc(13,"Entregador:"),r.Kb(),r.kc(14,xn,2,1,"h4",11),r.kc(15,vn,2,0,"h4",34),r.Kb(),r.kc(16,yn,8,2,"div",35),r.kc(17,wn,3,0,"ion-button",36),r.Kb(),r.Kb()),2&n){const n=r.Vb();r.yb(2),r.cc("ngIf",n.corrida.id),r.yb(1),r.cc("ngIf",n.corrida._entregador),r.yb(1),r.cc("ngIf",!n.corrida._entregador),r.yb(5),r.mc(r.Zb(10,8,n.corrida.valorEntregador+n.corrida.valorApp,"BRL",!0,"1.2")),r.yb(5),r.cc("ngIf",n.corrida._entregador),r.yb(1),r.cc("ngIf",!n.corrida._entregador),r.yb(1),r.cc("ngIf",!n.corrida._entregador),r.yb(1),r.cc("ngIf",!n.corrida.dataFinalizada)}}function Kn(n,o){if(1&n){const n=r.Mb();r.Lb(0,"div"),r.Lb(1,"ion-button",40),r.Tb("click",(function(){return r.hc(n),r.Vb().mapa()})),r.lc(2," VER NO MAPA "),r.Jb(3,"ion-icon",41),r.Kb(),r.Lb(4,"ion-button",40),r.Tb("click",(function(){return r.hc(n),r.Vb().chat()})),r.lc(5," CHAT "),r.Jb(6,"ion-icon",42),r.Kb(),r.Lb(7,"ion-button",40),r.Tb("click",(function(){return r.hc(n),r.Vb().fotoEncomenda()})),r.lc(8," FOTO DA ENCOMENDA "),r.Jb(9,"ion-icon",43),r.Kb(),r.Kb()}}function In(n,o){if(1&n&&(r.Lb(0,"span"),r.lc(1," Valor total de "),r.Lb(2,"span",45),r.lc(3),r.Wb(4,"currency"),r.Kb(),r.Kb()),2&n){const n=r.Vb(2);r.yb(3),r.mc(r.Zb(4,1,n.corrida.valor,"BRL",!0,"1.2"))}}function En(n,o){if(1&n&&(r.Lb(0,"span",44),r.kc(1,In,5,6,"span",11),r.Jb(2,"br"),r.lc(3," Revise os dados da entrega. Depois clique abaixo: "),r.Kb()),2&n){const n=r.Vb();r.yb(1),r.cc("ngIf",n.corrida.calculouValor)}}function zn(n,o){if(1&n){const n=r.Mb();r.Lb(0,"ion-button",40),r.Tb("click",(function(){return r.hc(n),r.Vb().confirmar()})),r.lc(1," CONFIRMAR "),r.Jb(2,"ion-icon",46),r.Kb()}}const An=[{path:"",component:(()=>{class n{constructor(n,o,t,e,a,i,r){this.api=n,this.messagingService=o,this.modalController=t,this.navController=e,this.geolocation=a,this.socialSharing=i,this.utils=r,this.usuarioLogado={_cliente:{}},this.corrida={formaEntrega:"Moto",entregas:[],dataEntrega:new Date}}ionViewWillEnter(){return Object(i.b)(this,void 0,void 0,(function*(){this.corrida={formaEntrega:"Moto",entregas:[],dataEntrega:new Date},this.usuarioLogado=this.api.retornaUsuarioLogado();let n=this.utils.retornaStorage("corrida");n?(this.corrida=n,this.buscarCorrida(),this.utils.removeStorage("corrida")):this.carregaLocalCliente(),this.messagingService.requestPermission(()=>{this.messagingService.aoReceberMensagem((n,o)=>{this.corrida._id&&this.buscarCorrida()})})}))}carregaLocalCliente(){return Object(i.b)(this,void 0,void 0,(function*(){yield this.utils.showSpinner(),this.geolocation.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4,maximumAge:3600}).then(n=>Object(i.b)(this,void 0,void 0,(function*(){try{let o=n.coords.latitude,t=n.coords.longitude,e=this.api.retornaUsuarioLogado(),a=yield this.utils.buscaEndereco(o,t);e._cliente.latitudeAtual=o,e._cliente.longitudeAtual=t,e._cliente.enderecoAtual=a,this.corrida.enderecoOrigem=a,this.corrida.latitudeOrigem=o,this.corrida.longitudeOrigem=t,this.utils.gravaStorage(this.api.chaveUsuarioLogadoStorage,e),this.alteraDadosCorrida(!0),yield this.utils.cancelSpinner()}catch(o){yield this.utils.cancelSpinner()}}))).catch(n=>Object(i.b)(this,void 0,void 0,(function*(){yield this.utils.cancelSpinner()})))}))}alteraDadosCorrida(n){return Object(i.b)(this,void 0,void 0,(function*(){if(this.corrida._id)return;const o=yield this.modalController.create({component:W,cssClass:"fullscreen",componentProps:{corrida:this.utils.clone(this.corrida)}});yield o.present();const{data:t}=yield o.onWillDismiss();if(t){if(this.corrida=this.utils.retornaStorage("corrida"),t.agendar)return void this.agendarCorrida(n);this.confirmaDadosCorrida(n)}}))}agendarCorrida(n){return Object(i.b)(this,void 0,void 0,(function*(){this.modalController.dismiss(!0);const o=yield this.modalController.create({component:$,cssClass:"fullscreen",componentProps:{}});yield o.present();const{data:t}=yield o.onWillDismiss();t&&(this.corrida.horaEntrega=t.horaEntrega,this.corrida.dataEntrega=t.dataEntrega,this.corrida.dataHoraEntrega=t.dataHoraEntrega,this.utils.gravaStorage("corrida",this.corrida),this.confirmaDadosCorrida(n))}))}confirmaDadosCorrida(n){this.corrida=this.utils.retornaStorage("corrida"),n?this.alteraDadosEntrega(!1,n):this.ifFinalPagina()}alteraDadosEntrega(n,o){return Object(i.b)(this,void 0,void 0,(function*(){if(this.corrida._id)return;n=n||{};const o=yield this.modalController.create({component:F,cssClass:"fullscreen",componentProps:{entrega:this.utils.clone(n),corrida:this.corrida}});yield o.present();const{data:t}=yield o.onWillDismiss();if(t){this.corrida=this.utils.retornaStorage("corrida");let n=yield this.calculaValorCorrida();this.corrida.calculouValor=n}this.ifFinalPagina()}))}ifFinalPagina(){setTimeout(()=>{window.location.hash="finalPagina",this.content.scrollToBottom()},300)}calculaValorCorrida(){return Object(i.b)(this,void 0,void 0,(function*(){yield this.utils.showSpinner();let n=yield this.api.post("seguro-cliente/corrida/calculo-valor",this.corrida);return yield this.utils.cancelSpinner(),n.error?(this.utils.mensagemAviso(n.error),!1):(this.corrida.valor=n.data.valor,this.corrida.descricaoValor=n.data.descricaoValor,!0)}))}confirmar(){return Object(i.b)(this,void 0,void 0,(function*(){if(this.corrida.enderecoOrigem)if(0!=this.corrida.entregas.length)try{if(!this.usuarioLogado._id){if(!(yield this.utils.fazerLogin()))return;this.usuarioLogado=this.api.retornaUsuarioLogado()}yield this.utils.showSpinner(),this.corrida._cliente=this.usuarioLogado._cliente;let n=this.api.retornaUsuarioLogado();this.corrida.tokenFcm=n.tokenFcm;let o="seguro-cliente/corrida/solicitar",t=yield this.api.post(o,this.corrida);if(yield this.utils.cancelSpinner(),t.error)return void this.utils.mensagemAviso(t.error);this.corrida=t.data,this.utils.mensagemAviso("Sua corrida foi solicitada com sucesso. Voc\xea receber\xe1 a confirma\xe7\xe3o do entregador em breve."),this.buscarCorrida()}catch(n){this.utils.cancelSpinner(),this.utils.mensagemAviso("N\xe3o foi poss\xedvel solicitar a entrega. Verifique sua conex\xe3o com a internet.")}else yield this.utils.mensagemAviso("Por favor, informe o local da entrega.",()=>{this.alteraDadosEntrega()});else yield this.utils.mensagemAviso("Por favor, informe o local de partida.",()=>{this.alteraDadosCorrida()})}))}buscarCorrida(n){return Object(i.b)(this,void 0,void 0,(function*(){clearTimeout(this.timerCorridaPendente);try{n||(yield this.utils.showSpinner());let o="seguro-cliente/corrida/"+this.corrida._id;this.corrida.dataFinalizada&&(o="seguro-cliente/corrida/finalizada/"+this.corrida._id);let t=yield this.api.get(o);if(n||(yield this.utils.cancelSpinner()),!t.data)return void this.voltar();this.corrida=t.data,this.verificaContadorBuscaMotorista(),n||this.ifFinalPagina()}catch(o){console.log(o)}this.corrida.dataFinalizada||(clearTimeout(this.timerCorridaPendente),this.timerCorridaPendente=setTimeout(()=>{this.buscarCorrida(!0)},6e3))}))}verificaContadorBuscaMotorista(){if(!this.corrida||this.corrida.dataFinalizada)return;let n=V(this.corrida.dataSolicitacao),o=V().diff(n,"seconds")/300;this.contadorChamadaAtual=Math.floor(o/5)+1,this.tempoChamadaAtual=5-Math.trunc(o%5)}mapa(){this.utils.gravaStorage("corrida",this.corrida),this.navController.navigateRoot(["/mapa-entrega"])}voltar(){clearTimeout(this.timerCorridaPendente),this.navController.navigateRoot(["/"])}chat(){return Object(i.b)(this,void 0,void 0,(function*(){this.utils.gravaStorage("corrida",this.corrida),this.navController.navigateRoot(["/chat"])}))}cancelarCorrida(){this.utils.mensagemConfirmacao("Deseja realmente cancelar a corrida?",()=>Object(i.b)(this,void 0,void 0,(function*(){try{yield this.utils.showSpinner();let n=yield this.api.post("seguro-cliente/corrida/"+this.corrida._id+"/cancelar",{});if(yield this.utils.cancelSpinner(),n.error)return this.utils.mensagemAviso(n.error),!1;this.utils.mensagemToaster("Corrida cancelada com sucesso."),this.voltar()}catch(n){yield this.utils.cancelSpinner(),this.utils.mensagemAviso("N\xe3o foi poss\xedvel concluir a opera\xe7\xe3o. Verifique sua conex\xe3o.")}})))}compartilharCorrida(n){let o="https://app.gotele.com.br/acompanhar/"+this.corrida._id+"/entrega/"+n._id;console.log(o),this.socialSharing.share("Acompanhe a sua entrega pelo link: "+o)}fotoDaRetirada(){return Object(i.b)(this,void 0,void 0,(function*(){let n=yield this.modalController.create({component:l,cssClass:"fullscreen",componentProps:{imagemAtual:this.corrida.urlImagem}});yield n.present(),yield n.onWillDismiss()}))}fotoEncomenda(){return Object(i.b)(this,void 0,void 0,(function*(){this.corrida.urlImagem?this.fotoDaRetirada():this.utils.mensagemAviso("Entregador ainda n\xe3o enviou a foto da encomenda.")}))}}return n.\u0275fac=function(o){return new(o||n)(r.Ib(c.a),r.Ib(B.a),r.Ib(e.z),r.Ib(e.A),r.Ib(G.a),r.Ib(X.a),r.Ib(b.a))},n.\u0275cmp=r.Cb({type:n,selectors:[["app-solicitacao"]],viewQuery:function(n,o){var t;1&n&&r.pc(e.h,!0),2&n&&r.gc(t=r.Ub())&&(o.content=t.first)},decls:40,vars:19,consts:[["appScrollbarTheme","","id","pagina-solicitacao",3,"fullscreen","scrollEvents"],[1,"botao-sair-x",3,"click"],["name","close-outline"],[1,"logo-miniatura-top"],["src","/assets/logoMiniatura.png"],["class","atualizar-corridas",3,"click",4,"ngIf"],["class","botao-acao-secundaria",3,"click",4,"ngIf"],[1,"info",3,"click"],["class","corrida-finalizada",4,"ngIf"],[1,"item-info"],["class","item-info",4,"ngIf"],[4,"ngIf"],["class","botao-acao-secundaria botao-acao-secundaria-card",4,"ngIf"],["class","info",3,"click",4,"ngFor","ngForOf"],["class","botao-acao-secundaria botao-adicionar-entrega",3,"click",4,"ngIf"],["class","info",4,"ngIf"],[1,"botoes-confirmacao"],["class","confirmar-dados",4,"ngIf"],["class","botao-principal",3,"click",4,"ngIf"],["id","finalPagina",1,"final-pagina"],["finalPagina",""],[1,"atualizar-corridas",3,"click"],["name","refresh-outline"],[1,"botao-acao-secundaria",3,"click"],["name","help-circle-outline"],[1,"corrida-finalizada"],[1,"botao-acao-secundaria","botao-acao-secundaria-card"],["name","create-outline"],["class","botao-acao-secundaria botao-acao-secundaria-card",3,"click",4,"ngIf"],[1,"botao-acao-secundaria","botao-acao-secundaria-card",3,"click"],["name","share-social-outline"],[1,"botao-acao-secundaria","botao-adicionar-entrega",3,"click"],["name","add-outline"],[1,"info"],["style","color: red;",4,"ngIf"],["class","buscando-entregador",4,"ngIf"],["class","botao-acao-secundaria","style","color: red;",3,"click",4,"ngIf"],[2,"color","red"],[1,"buscando-entregador"],[1,"botao-acao-secundaria",2,"color","red",3,"click"],[1,"botao-principal",3,"click"],["name","navigate-outline"],["name","chatbubble-ellipses-outline"],["name","camera-outline"],[1,"confirmar-dados"],[2,"font-size","1.3rem","font-weight","600"],["name","caret-forward-outline"]],template:function(n,o){1&n&&(r.Lb(0,"ion-content",0),r.Lb(1,"div",1),r.Tb("click",(function(){return o.voltar()})),r.Jb(2,"ion-icon",2),r.Kb(),r.Lb(3,"div",3),r.Jb(4,"img",4),r.Kb(),r.kc(5,Z,2,0,"div",5),r.kc(6,Q,4,0,"ion-button",6),r.Lb(7,"ion-card",7),r.Tb("click",(function(){return o.alteraDadosCorrida()})),r.Lb(8,"ion-card-content"),r.kc(9,nn,2,0,"h2",8),r.Lb(10,"h2"),r.lc(11,"Detalhes da solicita\xe7\xe3o"),r.Kb(),r.Lb(12,"div",9),r.Lb(13,"h6"),r.lc(14,"Retirar em:"),r.Kb(),r.Lb(15,"h4"),r.lc(16),r.Kb(),r.Kb(),r.Lb(17,"div",9),r.Lb(18,"h6"),r.lc(19,"Forma de entrega:"),r.Kb(),r.Lb(20,"h4"),r.lc(21),r.Kb(),r.Kb(),r.kc(22,en,5,2,"div",10),r.kc(23,an,6,5,"div",10),r.Lb(24,"div",9),r.Lb(25,"h6"),r.lc(26,"Agendar entrega?"),r.Kb(),r.kc(27,rn,2,0,"h4",11),r.kc(28,cn,2,0,"h4",11),r.Kb(),r.kc(29,sn,6,5,"div",10),r.kc(30,dn,4,0,"ion-button",12),r.Kb(),r.Kb(),r.kc(31,Cn,18,9,"ion-card",13),r.kc(32,On,4,0,"ion-button",14),r.kc(33,Ln,18,13,"ion-card",15),r.Lb(34,"div",16),r.kc(35,Kn,10,0,"div",11),r.kc(36,En,4,1,"span",17),r.kc(37,zn,3,0,"ion-button",18),r.Kb(),r.Jb(38,"div",19,20),r.Kb()),2&n&&(r.cc("fullscreen",!0)("scrollEvents",!0),r.yb(5),r.cc("ngIf",o.corrida._id&&!o.corrida.dataFinalizada),r.yb(1),r.cc("ngIf",!o.corrida.dataFinalizada),r.yb(3),r.cc("ngIf",o.corrida.dataFinalizada),r.yb(7),r.mc(o.corrida.enderecoOrigem?o.corrida.enderecoOrigem:"N\xe3o informado"),r.yb(5),r.mc(o.corrida.formaEntrega),r.yb(1),r.cc("ngIf",o.usuarioLogado._cliente.permiteMaquininha),r.yb(1),r.cc("ngIf",!o.corrida.agendarEntrega&&o.corrida.horaMaximaRetirada),r.yb(4),r.cc("ngIf",o.corrida.agendarEntrega),r.yb(1),r.cc("ngIf",!o.corrida.agendarEntrega),r.yb(1),r.cc("ngIf",o.corrida.agendarEntrega),r.yb(1),r.cc("ngIf",!o.corrida._id),r.yb(1),r.cc("ngForOf",o.corrida.entregas),r.yb(1),r.cc("ngIf",!o.corrida._id),r.yb(1),r.cc("ngIf",o.corrida._id),r.yb(2),r.cc("ngIf",o.corrida._entregador&&!o.corrida.dataFinalizada),r.yb(1),r.cc("ngIf",!o.corrida._id&&o.corrida.enderecoOrigem&&o.corrida.entregas.length>0&&o.corrida.entregas[0].enderecoDestino),r.yb(1),r.cc("ngIf",!o.corrida._id))},directives:[e.h,m.a,e.j,s.l,e.f,e.g,s.k,e.e,e.t],pipes:[s.e,s.c],styles:[".lista-resultados-pesquisa[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:20px;font-weight:500}.lista-resultados-pesquisa[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{white-space:normal}.tela-dados-entrega[_ngcontent-%COMP%]{text-align:center}.tela-dados-entrega[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-bottom:200px}.tela-dados-entrega[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px}.tela-dados-entrega[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{margin-top:30px;height:60px}.tela-dados-entrega[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px}.tela-enderecos[_ngcontent-%COMP%]{--background:#eae8e3}.tela-enderecos[_ngcontent-%COMP%]   .confirmar[_ngcontent-%COMP%]{width:150px;display:inline-block}.tela-enderecos[_ngcontent-%COMP%]   .expandir-recolher[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:2.4rem;height:40px}.tela-enderecos[_ngcontent-%COMP%]   .info-enderecos[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.6509803921568628);text-align:center;padding:8px;position:fixed;top:5px;z-index:9999}.tela-enderecos[_ngcontent-%COMP%]   .map-enderecos[_ngcontent-%COMP%]{width:100%;position:absolute;top:0}.favoritos[_ngcontent-%COMP%]{text-align:left;padding:12px 12px 0}.favoritos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]{width:100%;cursor:pointer;display:flex;margin-bottom:5px;padding:5px 5px 0}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   .icone-favorito[_ngcontent-%COMP%]{color:#392b9a;font-size:1.5rem;margin-right:5px}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   .excluir[_ngcontent-%COMP%]{color:red;font-size:1.5rem}.favoritos[_ngcontent-%COMP%]   .favorito[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:5px;width:100%}.tela-buscar-endereco[_ngcontent-%COMP%]{--background:#eee!important}.tela-buscar-endereco[_ngcontent-%COMP%]   .sessao-favoritar[_ngcontent-%COMP%]{text-align:center}.tela-buscar-endereco[_ngcontent-%COMP%]   .nome-favorito[_ngcontent-%COMP%]{--background:#fdfdfd;margin:auto auto 10px}.tela-buscar-endereco[_ngcontent-%COMP%]   .favoritar[_ngcontent-%COMP%]{--background:none;color:#392b9a;--box-shadow:none;font-weight:700;margin:auto}.tela-buscar-endereco[_ngcontent-%COMP%]   .input-pesquisa[_ngcontent-%COMP%]{border:solid;border-color:#abaaaa;border-width:1px;border-radius:10px;--highlight-background:#d2a65a!important;--margin-bottom:8px}.tela-buscar-endereco[_ngcontent-%COMP%]   .rua-destino[_ngcontent-%COMP%]{width:calc(100% - 150px);margin-right:8px;display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   .numero-destino[_ngcontent-%COMP%]{width:60px;display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{position:absolute;z-index:999;text-align:center;margin:10px}.tela-buscar-endereco[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:5px 5px 0}.tela-buscar-endereco[_ngcontent-%COMP%]   .buscar-endereco[_ngcontent-%COMP%]{display:inline-block}.tela-buscar-endereco[_ngcontent-%COMP%]   .buscar-endereco[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:40px;width:40px;--background:none;color:#392b9a;margin-left:8px;--margin-bottom:8px}.tela-buscar-endereco[_ngcontent-%COMP%]   .confirmar-endereco-origem[_ngcontent-%COMP%]{width:100%;z-index:999;padding:5px 5px 10px;background:hsla(0,0%,87.8%,.7490196078431373);position:fixed;bottom:0}.tela-buscar-endereco[_ngcontent-%COMP%]   .confirmar-endereco-origem[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:260px;margin:auto}.tela-buscar-endereco[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:8px;text-align:left;width:calc(100% - 40px)}.confirmar[_ngcontent-%COMP%]{height:45px;--border-radius:10px;--padding:20px}ion-content[_ngcontent-%COMP%]{--background:#513dd9}ion-item[_ngcontent-%COMP%]{--background-focused:#fff!important}.info[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:0}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;text-align:center}.info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#8c8c8c}.info[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px;border-bottom:solid;border-color:#e4e4e4;border-width:1px}.info[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:10px}.locais[_ngcontent-%COMP%]{margin-left:8px;width:calc(100% - 16px);position:fixed;bottom:0;margin-bottom:0;z-index:999;text-align:center}.locais[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:6px}.locais[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:8px 8px 0}.locais[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#494949}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]{z-index:9999;width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.7215686274509804);padding:10px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .sessao-1[_ngcontent-%COMP%], .botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .sessao-2[_ngcontent-%COMP%]{width:100%;max-width:300px;display:flex;margin:auto}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{color:#fff;--background:#1ac6e2;display:block;height:60px;width:100%;margin:5px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:5px}.botoes-confirmacao-dados-corrida[_ngcontent-%COMP%]   .botao-sos[_ngcontent-%COMP%]{--background:#db2626}.botoes-confirmacao[_ngcontent-%COMP%]{z-index:9999;width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.7215686274509804);padding:10px}.botoes-confirmacao[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{--background:#1ac6e2;max-width:280px;min-width:200px;margin-bottom:10px;margin-left:auto;margin-right:auto;display:block}.botoes-confirmacao[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:5px}.botoes-confirmacao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:5px;font-weight:700}.botoes-confirmacao[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:2px}.corrida-finalizada[_ngcontent-%COMP%]{text-align:center}.botao-adicionar-entrega[_ngcontent-%COMP%]{margin-top:15px;font-size:16px;border-bottom:solid;border-width:1px;border-color:#1b3363;min-width:320px}.atualizar-corridas[_ngcontent-%COMP%]{text-align:center;font-size:40px;color:#fff;margin-top:10px}.fechar-modal[_ngcontent-%COMP%]{height:auto!important}.fechar-modal[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:10px;left:5px}.buscando-entregador[_ngcontent-%COMP%]{width:100%;margin-top:10px;margin-bottom:10px;text-align:center}.buscando-entregador[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.confirmar-dados[_ngcontent-%COMP%]{color:#fff;display:block;margin-bottom:10px}.forma-entrega[_ngcontent-%COMP%]   .botoes-forma-entrega[_ngcontent-%COMP%]{display:flex}.forma-entrega[_ngcontent-%COMP%]   .botoes-forma-entrega[_ngcontent-%COMP%]   .botao-forma-entrega[_ngcontent-%COMP%]{border:solid;border-color:grey;border-width:1px;border-radius:10px;width:30%;max-width:80px;margin:5px;padding:10px 10px 2px;cursor:pointer;opacity:.5}.forma-entrega[_ngcontent-%COMP%]   .forma-entrega-selecionada[_ngcontent-%COMP%]{border-color:#513dd9!important;border-width:3px!important;opacity:1!important}"]}),n})()}];let Sn=(()=>{class n{}return n.\u0275mod=r.Gb({type:n}),n.\u0275inj=r.Fb({factory:function(o){return new(o||n)},imports:[[a.i.forChild(An)],a.i]}),n})();var Dn=t("onrN");let Tn=(()=>{class n{}return n.\u0275mod=r.Gb({type:n}),n.\u0275inj=r.Fb({factory:function(o){return new(o||n)},providers:[G.a],imports:[[e.w,Dn.a,Sn]]}),n})()}}]);