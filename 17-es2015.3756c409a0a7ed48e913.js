(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{mhBS:function(t,e,i){"use strict";i.r(e),i.d(e,"MapaEntregaPageModule",(function(){return h}));var r=i("TEn/"),o=i("tyNb"),a=i("mrSG"),n=i("fXoL"),s=i("Dp36"),c=i("fkzy"),l=i("9qa2");const d=["mapElementOrigem"],u=[{path:"",component:(()=>{class t{constructor(t,e,i){this.api=t,this.navController=e,this.utils=i,this.ultimaPosicaoEntregador={}}ionViewWillEnter(){this.corrida=this.utils.retornaStorage("corrida"),this.corrida?this.carregaMapa():this.voltar()}carregaMapa(){let t=this.utils.retornaPosition(this.corrida.latitudeOrigem,this.corrida.longitudeOrigem);setTimeout(()=>{this.map=new google.maps.Map(this.mapElementOrigem.nativeElement,{styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit.station.bus",stylers:[{visibility:"off"}]}],center:t,disableDefaultUI:!0,zoom:14}),new google.maps.Marker({position:t,map:this.map,title:"Origem",icon:"/assets/icon/home.png"}),this.corrida.entregas.forEach(t=>{let e=this.utils.retornaPosition(t.latitudeDestino,t.longitudeDestino);new google.maps.Marker({position:e,map:this.map,title:"Entrega "+t.sequencial,icon:"/assets/icon/person.png"})}),this.carregaPosicaoEntregador()},200)}carregaPosicaoEntregador(){return Object(a.b)(this,void 0,void 0,(function*(){clearTimeout(this.timerCorridaPendente);try{let t=(yield this.api.get("seguro-cliente/corrida/"+this.corrida._id)).data;if(!t)return void this.voltar();let e=t._entregador;if(this.ultimaPosicaoEntregador.lat!=e.latitudeAtual&&this.ultimaPosicaoEntregador.lng!=e.longitudeAtual){let t=this.utils.retornaPosition(e.latitudeAtual,e.longitudeAtual);this.ultimaPosicaoEntregador=t,this.marcadorEntregador?this.marcadorEntregador.setPosition(t):this.marcadorEntregador=new google.maps.Marker({position:t,map:this.map,title:"Entregador ",icon:"/assets/icon/entregador.png"})}}catch(t){console.log(t)}clearTimeout(this.timerCorridaPendente),this.timerCorridaPendente=setTimeout(()=>{this.carregaPosicaoEntregador()},3e3)}))}voltar(t){window.clearTimeout(this.timerCorridaPendente),this.utils.gravaStorage("corrida",this.corrida),this.navController.navigateRoot(["/solicitacao"])}}return t.\u0275fac=function(e){return new(e||t)(n.Ib(s.a),n.Ib(r.A),n.Ib(c.a))},t.\u0275cmp=n.Cb({type:t,selectors:[["app-mapa-entrega"]],viewQuery:function(t,e){var i;1&t&&n.pc(d,!0),2&t&&n.gc(i=n.Ub())&&(e.mapElementOrigem=i.first)},decls:7,vars:1,consts:[["appScrollbarTheme","",1,"tela-buscar-endereco",3,"fullscreen"],[1,"botao-sair-x",3,"click"],["name","close-outline"],[1,"logo-miniatura-top"],["src","/assets/logoMiniatura.png"],[1,"map"],["mapElementOrigem",""]],template:function(t,e){1&t&&(n.Lb(0,"ion-content",0),n.Lb(1,"div",1),n.Tb("click",(function(){return e.voltar()})),n.Jb(2,"ion-icon",2),n.Kb(),n.Lb(3,"div",3),n.Jb(4,"img",4),n.Kb(),n.Jb(5,"div",5,6),n.Kb()),2&t&&n.cc("fullscreen",!0)},directives:[r.h,l.a,r.j],styles:[".map[_ngcontent-%COMP%]{height:100%;width:100%;margin-top:5px}ion-content[_ngcontent-%COMP%]{--background:#513dd9}"]}),t})()}];let g=(()=>{class t{}return t.\u0275mod=n.Gb({type:t}),t.\u0275inj=n.Fb({factory:function(e){return new(e||t)},imports:[[o.i.forChild(u)],o.i]}),t})();var m=i("onrN"),p=i("Bfh1");let h=(()=>{class t{}return t.\u0275mod=n.Gb({type:t}),t.\u0275inj=n.Fb({factory:function(e){return new(e||t)},providers:[p.a],imports:[[r.w,m.a,g]]}),t})()}}]);