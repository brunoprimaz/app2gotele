!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,o,i){return o&&n(t.prototype,o),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{MpVM:function(n,i,e){"use strict";e.r(i),e.d(i,"InicioPageModule",(function(){return y}));var r=e("tyNb"),a=e("mrSG"),c=e("fXoL"),s=e("Dp36"),u=e("TEn/"),b=e("6QPC"),l=e("Rzux"),d=e("WOgW"),g=e("fkzy"),p=e("9qa2"),f=e("ofXK");function h(t,n){if(1&t){var o=c.Mb();c.Lb(0,"div",10),c.Tb("click",(function(){return c.hc(o),c.Vb().minhaConta()})),c.lc(1," Bem-vindo "),c.Lb(2,"span",11),c.Lb(3,"strong"),c.lc(4),c.Kb(),c.Kb(),c.Kb()}if(2&t){var i=c.Vb();c.yb(4),c.mc(i.usuarioLogado.nome)}}function m(t,n){if(1&t){var o=c.Mb();c.Lb(0,"ion-button",12),c.Tb("click",(function(){return c.hc(o),c.Vb().sair()})),c.Lb(1,"span"),c.lc(2,"SAIR"),c.Kb(),c.Kb()}}function v(t,n){if(1&t){var o=c.Mb();c.Lb(0,"div",13),c.Tb("click",(function(){return c.hc(o),c.Vb().abreCorridaEmAberto()})),c.Jb(1,"ion-icon",14),c.Lb(2,"span"),c.lc(3,"Voc\xea possui solicita\xe7\xf5es em aberto. "),c.Jb(4,"br"),c.lc(5,"Clique aqui para verificar."),c.Kb(),c.Kb()}}function x(t,n){if(1&t){var o=c.Mb();c.Lb(0,"ion-button",15),c.Tb("click",(function(){return c.hc(o),c.Vb().fazerLogin()})),c.Lb(1,"span"),c.lc(2,"ENTRAR/CADASTRAR"),c.Kb(),c.Jb(3,"ion-icon",16),c.Kb()}}function C(t,n){if(1&t){var o=c.Mb();c.Lb(0,"ion-button",15),c.Tb("click",(function(){return c.hc(o),c.Vb().minhaConta()})),c.Lb(1,"span"),c.lc(2,"MINHA CONTA"),c.Kb(),c.Jb(3,"ion-icon",17),c.Kb()}}function P(t,n){if(1&t){var o=c.Mb();c.Lb(0,"ion-button",15),c.Tb("click",(function(){return c.hc(o),c.Vb().installPwa()})),c.Lb(1,"span"),c.lc(2,"INSTALAR APP"),c.Kb(),c.Jb(3,"ion-icon",18),c.Kb()}}var k,O,L,w=[{path:"",component:(k=function(){function n(o,i,e,r,a,c,s,u,b){t(this,n),this.api=o,this.alertCtrl=i,this.Pwa=e,this.platform=r,this.messagingService=a,this.androidPermissions=c,this.utils=s,this.navController=u,this.modalController=b,this.usuarioLogado={},this.verificaPermissoes()}return o(n,[{key:"ionViewWillEnter",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.usuarioLogado=this.api.retornaUsuarioLogado(),!this.usuarioLogado||!this.usuarioLogado._id){t.next=13;break}return t.next=3,this.utils.showSpinner();case 3:return t.next=6,this.api.get("seguro-cliente/cliente/logado");case 6:return n=t.sent,this.usuarioLogado=n.data,this.utils.gravaStorage(this.api.chaveUsuarioLogadoStorage,this.usuarioLogado),t.next=11,this.utils.cancelSpinner();case 11:this.messagingService.requestPermission((function(){o.messagingService.aoReceberMensagem((function(t,n){}))})),this.verificaCorridaEmAberto();case 13:case"end":return t.stop()}}),t,this)})))}},{key:"verificaPermissoes",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.verificaPermissao(this.androidPermissions.PERMISSION.ACCESS_COARSE_LOCATION);case 2:return t.next=4,this.verificaPermissao(this.androidPermissions.PERMISSION.ACCESS_FINE_LOCATION);case 4:return t.next=6,this.verificaPermissao(this.androidPermissions.PERMISSION.ACCESS_LOCATION_EXTRA_COMMANDS);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"verificaPermissao",value:function(t){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.androidPermissions.requestPermission(t);case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),n,this,[[0,5]])})))}},{key:"verificaCorridaEmAberto",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.usuarioLogado||!this.usuarioLogado._id){t.next=6;break}return t.next=4,this.api.get("seguro-cliente/corrida/cliente/abertas");case 4:n=t.sent,this.corridaEmAberto=n.data;case 6:case"end":return t.stop()}}),t,this)})))}},{key:"fazerLogin",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.utils.fazerLogin();case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}this.usuarioLogado=this.api.retornaUsuarioLogado();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"minhaConta",value:function(){this.navController.navigateRoot(["/meus-dados"])}},{key:"abreCorridaEmAberto",value:function(){this.corridaEmAberto&&1==this.corridaEmAberto.length?(this.utils.gravaStorage("corrida",this.corridaEmAberto[0]),this.navController.navigateRoot(["/solicitacao"])):this.minhaConta()}},{key:"solicitarEntrega",value:function(){this.utils.removeStorage("corrida"),this.navController.navigateRoot(["/solicitacao"])}},{key:"sair",value:function(){this.utils.gravaStorage(this.api.chaveUsuarioLogadoStorage,{}),this.usuarioLogado={_cliente:{}}}},{key:"baixarApp",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertCtrl.create({message:"Qual o tipo do seu smartphone?",buttons:[{text:"Iphone",handler:function(){o.utils.mensagemAviso("App n\xe3o dispon\xedvel para Iphone. Por favor solicite a entrega por esta p\xe1gina.")}},{text:"Android",handler:function(){window.open("https://play.google.com/store/apps/details?id=br.com.impactech.gotele.app","_blank")}},{text:"Voltar",role:"cancel",handler:function(){}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"installPwa",value:function(){this.Pwa.promptEvent.prompt()}}]),n}(),k.\u0275fac=function(t){return new(t||k)(c.Ib(s.a),c.Ib(u.a),c.Ib(b.a),c.Ib(u.B),c.Ib(l.a),c.Ib(d.a),c.Ib(g.a),c.Ib(u.A),c.Ib(u.z))},k.\u0275cmp=c.Cb({type:k,selectors:[["app-inicio"]],decls:13,vars:7,consts:[["appScrollbarTheme","",3,"fullscreen"],["class","identificacao-usuario",3,"click",4,"ngIf"],["class","botao-sair",3,"click",4,"ngIf"],[1,"logo"],["src","/assets/logo.png"],[1,"opcoes"],["class","corrida-em-aberto",3,"click",4,"ngIf"],[1,"botao-principal",3,"click"],["name","caret-forward-outline"],["class","botao-acao-secundaria",3,"click",4,"ngIf"],[1,"identificacao-usuario",3,"click"],[2,"font-size","1.2rem"],[1,"botao-sair",3,"click"],[1,"corrida-em-aberto",3,"click"],["name","information-circle-outline"],[1,"botao-acao-secundaria",3,"click"],["name","log-in-outline"],["name","person-outline"],["name","cloud-download-outline"]],template:function(t,n){1&t&&(c.Lb(0,"ion-content",0),c.kc(1,h,5,1,"div",1),c.kc(2,m,3,0,"ion-button",2),c.Lb(3,"div",3),c.Jb(4,"img",4),c.Kb(),c.Lb(5,"div",5),c.kc(6,v,6,0,"div",6),c.Lb(7,"ion-button",7),c.Tb("click",(function(){return n.solicitarEntrega()})),c.lc(8," SOLICITAR ENTREGA "),c.Jb(9,"ion-icon",8),c.Kb(),c.kc(10,x,4,0,"ion-button",9),c.kc(11,C,4,0,"ion-button",9),c.kc(12,P,4,0,"ion-button",9),c.Kb(),c.Kb()),2&t&&(c.cc("fullscreen",!0),c.yb(1),c.cc("ngIf",n.usuarioLogado._id),c.yb(1),c.cc("ngIf",n.usuarioLogado._id),c.yb(4),c.cc("ngIf",n.corridaEmAberto&&n.corridaEmAberto.length>0),c.yb(4),c.cc("ngIf",!n.usuarioLogado._id),c.yb(1),c.cc("ngIf",n.usuarioLogado._id),c.yb(1),c.cc("ngIf",n.Pwa.promptEvent))},directives:[u.h,p.a,f.l,u.e,u.j],styles:["ion-content[_ngcontent-%COMP%]{--background:#513dd9}.opcoes[_ngcontent-%COMP%]{width:100%;position:fixed;bottom:0;text-align:center;background:rgba(81,61,217,.6588235294117647);padding:10px 10px 20px}.opcoes[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:6px}.opcoes[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#494949}.opcoes[_ngcontent-%COMP%]   .botao-principal[_ngcontent-%COMP%]{font-size:17px;--background:#1ac6e2;--padding-start:25px;margin-top:5px;margin-right:auto;margin-left:auto;height:52px;--border-radius:10px;--padding:15px;display:block;max-width:280px}.logo[_ngcontent-%COMP%]{margin:100px auto auto;width:85%}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:flex}.botao-sair[_ngcontent-%COMP%]{color:#eaa0a0;height:35px;width:50px;--background:none!important;--box-shadow:none!important;position:fixed;top:0;right:5px}.identificacao-usuario[_ngcontent-%COMP%]{color:#fff;position:fixed;width:calc(100% - 100px);top:10px;left:10px}.cadastro-cliente[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px}.cadastro-cliente[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{position:fixed;bottom:80px;text-align:center}.botao-acao-secundaria[_ngcontent-%COMP%]{margin-top:10px}.corrida-em-aberto[_ngcontent-%COMP%]{margin-bottom:10px;background-color:rgba(0,0,0,.16862745098039217);padding:10px;color:#fff}.corrida-em-aberto[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.corrida-em-aberto[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;cursor:pointer;padding-top:0}.instalar[_ngcontent-%COMP%]{text-align:center;width:100%;font-size:1.3rem;font-weight:500;color:#fff;margin:50px auto auto;display:flex;cursor:pointer}.instalar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:auto}.instalar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:auto}"]}),k)}],M=((O=o((function n(){t(this,n)}))).\u0275mod=c.Gb({type:O}),O.\u0275inj=c.Fb({factory:function(t){return new(t||O)},imports:[[r.i.forChild(w)],r.i]}),O),_=e("onrN"),y=((L=o((function n(){t(this,n)}))).\u0275mod=c.Gb({type:L}),L.\u0275inj=c.Fb({factory:function(t){return new(t||L)},imports:[[_.a,M]]}),L)}}])}();